{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/2021_11/06_gatsby_customization_4_tag/",
    "result": {"data":{"site":{"siteMetadata":{"title":"loelheim"}},"markdownRemark":{"id":"fc48be77-11cc-51c2-aabd-c9aac2fd55c4","excerpt":"…","html":"<h3 id=\"1-태그를-위해-구현해-둔-기능-살펴보기\" style=\"position:relative;\"><a href=\"#1-%ED%83%9C%EA%B7%B8%EB%A5%BC-%EC%9C%84%ED%95%B4-%EA%B5%AC%ED%98%84%ED%95%B4-%EB%91%94-%EA%B8%B0%EB%8A%A5-%EC%82%B4%ED%8E%B4%EB%B3%B4%EA%B8%B0\" aria-label=\"1 태그를 위해 구현해 둔 기능 살펴보기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 태그를 위해 구현해 둔 기능 살펴보기</h3>\n<p>이번 포스팅을 작성했을 때 사용한 스크립트를 잠깐 살펴보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">loel@loels-MacBook-Pro <span class=\"token operator\">></span> <span class=\"token function\">npm</span> run post\n\n<span class=\"token operator\">></span> loel@0.1.0 post\n<span class=\"token operator\">></span> node scripts/frontman\n\n? title: 개츠비로 블로그 시작하기 - 커스터마이징 <span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span>\n? description: 개츠비로 시작하는 블로그, 태그 기능을 추가하자\n? pathname <span class=\"token punctuation\">(</span>alphanumeric except some special characters<span class=\"token punctuation\">)</span>:  06_gatsby_customization_4_tag\n? tags <span class=\"token punctuation\">(</span>multiple tags concatenated with comma<span class=\"token punctuation\">)</span>:  gatsby, 개츠비, blog, 블로그, tag, tags, 태그, category, 카테고리\n\n <span class=\"token operator\">></span> title: 개츠비로 블로그 시작하기 - 커스터마이징 <span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span>\n <span class=\"token operator\">></span> description: 개츠비로 시작하는 블로그, 태그 기능을 추가하자\n <span class=\"token operator\">></span> tags: gatsby,개츠비,blog,블로그,tag,tags,태그,category,카테고리\n <span class=\"token operator\">></span> date: <span class=\"token number\">2021</span>-11-29T23:05:43.028Z\n\n 🚀  now your new post is ready <span class=\"token operator\">!</span></code></pre></div>\n<p>이미 <a href=\"/2021_11/03_gatsby_customization_1_writing/\">이전 포스트</a>의 템플릿에서 태그 목록을 지정할 수 있도록 스크립트를 작성했었다.</p>\n<p>이 태그를 글 목록에 노출하고 태그를 선택하면 해당 태그가 포함된 글만 볼 수 있도록 할 예정이다.</p>\n<h3 id=\"2-태그-컴포넌트-추가\" style=\"position:relative;\"><a href=\"#2-%ED%83%9C%EA%B7%B8-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-%EC%B6%94%EA%B0%80\" aria-label=\"2 태그 컴포넌트 추가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 태그 컴포넌트 추가</h3>\n<h4 id=\"컴포넌트-코드-작성\" style=\"position:relative;\"><a href=\"#%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-%EC%BD%94%EB%93%9C-%EC%9E%91%EC%84%B1\" aria-label=\"컴포넌트 코드 작성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>컴포넌트 코드 작성</h4>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Link <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"gatsby\"</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Tags</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> tags <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> marginBottom<span class=\"token operator\">:</span> <span class=\"token string\">\"40px\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n      <span class=\"token punctuation\">{</span>tags<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tag</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n        <span class=\"token operator\">&lt;</span>Link className<span class=\"token operator\">=</span><span class=\"token string\">\"tag\"</span> key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>tag<span class=\"token punctuation\">}</span> to<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/tags?tag=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>tag<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span>tag<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Link<span class=\"token operator\">></span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Tags</code></pre></div>\n<p>태그 목록을 제공하면 각 태그와 함께 눌렀을 때 이동할 링크를 연결해서 제공하는 컨테이너 역할을 한다.</p>\n<h4 id=\"컴포넌트-디자인\" style=\"position:relative;\"><a href=\"#%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-%EB%94%94%EC%9E%90%EC%9D%B8\" aria-label=\"컴포넌트 디자인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>컴포넌트 디자인</h4>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">:root</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">--tag-color</span><span class=\"token punctuation\">:</span> #f7f8fc<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--tag-highlight-color</span><span class=\"token punctuation\">:</span> darkgrey<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.tag</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 4px 8px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border-radius</span><span class=\"token punctuation\">:</span> 10px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border-style</span><span class=\"token punctuation\">:</span> solid<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border-color</span><span class=\"token punctuation\">:</span> darkgrey<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border-width</span><span class=\"token punctuation\">:</span> 2px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">margin-right</span><span class=\"token punctuation\">:</span> 5px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">line-height</span><span class=\"token punctuation\">:</span> 2.5<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">var</span><span class=\"token punctuation\">(</span>--tag-color<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">var</span><span class=\"token punctuation\">(</span>--tag-highlight-color<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">white-space</span><span class=\"token punctuation\">:</span> nowrap<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.tag:link</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">text-decoration</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.tag:hover</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">var</span><span class=\"token punctuation\">(</span>--tag-highlight-color<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">var</span><span class=\"token punctuation\">(</span>--tag-color<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">transform</span><span class=\"token punctuation\">:</span> <span class=\"token function\">scale</span><span class=\"token punctuation\">(</span>1.2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>보는데 큰 불편함이 없는 선에서 간단하게 디자인했다.</p>\n<h4 id=\"태그로-검색된-포스트-목록-페이지-작성\" style=\"position:relative;\"><a href=\"#%ED%83%9C%EA%B7%B8%EB%A1%9C-%EA%B2%80%EC%83%89%EB%90%9C-%ED%8F%AC%EC%8A%A4%ED%8A%B8-%EB%AA%A9%EB%A1%9D-%ED%8E%98%EC%9D%B4%EC%A7%80-%EC%9E%91%EC%84%B1\" aria-label=\"태그로 검색된 포스트 목록 페이지 작성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>태그로 검색된 포스트 목록 페이지 작성</h4>\n<p>검색 기능을 구현할 때와 마찬가지로, 블로그의 레이아웃을 비슷하게 가져가려고 한다. 디자인에 대해 크게 고민할 필요도 없어지고 일관된 디자인이 추후에 컴포넌트를 추가할 때에도 큰 도움이 된다 생각해서 추가적인 디자인은 가급적이면 안하려고 한다.</p>\n<p>우선은 <code class=\"language-text\">src/pages/tags.js</code> 파일을 만들고 아래 내용을 추가하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Link<span class=\"token punctuation\">,</span> useStaticQuery<span class=\"token punctuation\">,</span> graphql <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"gatsby\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> formatTime <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../util/formatter\"</span>\n\n<span class=\"token keyword\">import</span> Layout <span class=\"token keyword\">from</span> <span class=\"token string\">\"../components/layout\"</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">TagComponent</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> location<span class=\"token punctuation\">,</span> pageContext <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token keyword\">const</span> params <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">URLSearchParams</span><span class=\"token punctuation\">(</span>location<span class=\"token punctuation\">.</span>search<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> tag <span class=\"token operator\">=</span> params<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"tag\"</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> allMarkdownRemark <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useStaticQuery</span><span class=\"token punctuation\">(</span>graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    query {\n      allMarkdownRemark(sort: { fields: [frontmatter___date], order: DESC }) {\n        nodes {\n          id\n          fields {\n            slug\n          }\n          frontmatter {\n            date\n            title\n            description\n            tags\n          }\n        }\n      }\n    }\n  </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> allMarkdownRemark<span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">node</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> node<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>tags<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span>tag<span class=\"token punctuation\">)</span> <span class=\"token operator\">>=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>Layout location<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>location<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n\n        <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">{tag}</span><span class=\"token template-punctuation string\">`</span></span> 태그가 설정된 포스트 목록입니다<span class=\"token punctuation\">.</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n\n        <span class=\"token operator\">&lt;</span>ol style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> listStyle<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">none</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n          <span class=\"token punctuation\">{</span>result<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">post</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">const</span> title <span class=\"token operator\">=</span> post<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>title <span class=\"token operator\">||</span> post<span class=\"token punctuation\">.</span>fields<span class=\"token punctuation\">.</span>slug\n\n            <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n              <span class=\"token operator\">&lt;</span>li key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>fields<span class=\"token punctuation\">.</span>slug<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n                <span class=\"token operator\">&lt;</span>article\n                  className<span class=\"token operator\">=</span><span class=\"token string\">\"post-list-item\"</span>\n                  itemScope\n                  itemType<span class=\"token operator\">=</span><span class=\"token string\">\"http://schema.org/Article\"</span>\n                <span class=\"token operator\">></span>\n                  <span class=\"token operator\">&lt;</span>header<span class=\"token operator\">></span>\n                    <span class=\"token operator\">&lt;</span>h2<span class=\"token operator\">></span>\n                      <span class=\"token operator\">&lt;</span>Link to<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>fields<span class=\"token punctuation\">.</span>slug<span class=\"token punctuation\">}</span> itemProp<span class=\"token operator\">=</span><span class=\"token string\">\"url\"</span><span class=\"token operator\">></span>\n                        <span class=\"token operator\">&lt;</span>span itemProp<span class=\"token operator\">=</span><span class=\"token string\">\"headline\"</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span>title<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span>\n                      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Link<span class=\"token operator\">></span>\n                    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h2<span class=\"token operator\">></span>\n                    <span class=\"token operator\">&lt;</span>small<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token function\">formatTime</span><span class=\"token punctuation\">(</span>post<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>small<span class=\"token operator\">></span>\n                  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>header<span class=\"token operator\">></span>\n                  <span class=\"token operator\">&lt;</span>section<span class=\"token operator\">></span>\n                    <span class=\"token operator\">&lt;</span>p\n                      dangerouslySetInnerHTML<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n                        __html<span class=\"token operator\">:</span> post<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>description <span class=\"token operator\">||</span> post<span class=\"token punctuation\">.</span>excerpt<span class=\"token punctuation\">,</span>\n                      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n                      itemProp<span class=\"token operator\">=</span><span class=\"token string\">\"description\"</span>\n                    <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n                  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>section<span class=\"token operator\">></span>\n                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>article<span class=\"token operator\">></span>\n              <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>li<span class=\"token operator\">></span>\n            <span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ol<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Layout<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> TagComponent</code></pre></div>\n<p>대부분은 <code class=\"language-text\">src/pages/search.js</code>와 동일하고 태그를 기준으로 필터링하는 부분만 약간의 차이가 있다. 이로써 태그와 관련된 기능 구현을 모두 마쳤다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> allMarkdownRemark<span class=\"token punctuation\">.</span>nodes<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">node</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> node<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>tags<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span>tag<span class=\"token punctuation\">)</span> <span class=\"token operator\">>=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"3-쿼리가-좀-이상한데-\" style=\"position:relative;\"><a href=\"#3-%EC%BF%BC%EB%A6%AC%EA%B0%80-%EC%A2%80-%EC%9D%B4%EC%83%81%ED%95%9C%EB%8D%B0-\" aria-label=\"3 쿼리가 좀 이상한데  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 쿼리가 좀 이상한데 ?</h3>\n<p>사실 이 쿼리는 상당히 비효율적이다. 모든 데이터를 가져온 이후에 필터링을 하기 때문에 풀 스캔이 발생하는데 일반적인 케이스라면 쿼리를 작성할 때 필터링 조건을 추가했을 것이다.</p>\n<p>가령 이런 형태처럼 변수를 추가해서 데이터를 조회하는 시점에 필터링 하는 것을 기대했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> allMarkdownRemark <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useStaticQuery</span><span class=\"token punctuation\">(</span>graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  query($tag: String!) {\n    allMarkdownRemark(\n        sort: { fields: [frontmatter___date], order: DESC }\n        filter: {frontmatter: {tags: {in: [$tag]}}}\n    ) {\n      nodes {\n        id\n        fields {\n          slug\n        }\n        frontmatter {\n          date\n          title\n          description\n          tags\n        }\n      }\n    }\n  }\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>위와 같이 변수를 지정하고 값을 전달하면 당연히 될 거라고 생각했는데, <code class=\"language-text\">개츠비</code>에서 변수를 전달할 수 있는 메서드를 찾을 수 없었다. (찾으면 공유 좀 부탁드립니다 …)</p>\n<p>이 방법이 어렵다면 약간의 꼼수(?)지만 템플릿 리터럴을 사용해보는 방법도 있을거라 생각했다. 하지만 그렇게 작업하면 아래와 같은 오류가 발생한다.</p>\n<blockquote>\n<p>Error: …/src/pages/search.js: BabelPluginRemoveGraphQLQueries: String interpolations are not allowed in graphql fragments. Included fragments should be referenced as `…MyModule_foo`.</p>\n</blockquote>\n<p>요약하면 플러그인을 통한 쿼리에서는 템플릿 리터럴을 제공하지 않아서 발생하는 문제였고, 말 그대로 메서드 이름 자체가 <code class=\"language-text\">StaticQuery</code>이기 때문에 발생하는 문제로 보인다.</p>\n<p>이 문제는 페이지를 생성하는 부분에서 <code class=\"language-text\">pageContext</code>에 전달하면 가능하다고는 하는데, 쿼리를 호출할 때 바인딩이 자유롭지 않다는 점에서 상당한 제약이 있을 것 같다. 나름 <code class=\"language-text\">리액트</code>를 사용하면서 상당히 자유롭게 개발을 한다고 생각했는데 막상 이런 부분에서 막히니깐 의외로 맥이 빠진다고 해야하나 …</p>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#1-%ED%83%9C%EA%B7%B8%EB%A5%BC-%EC%9C%84%ED%95%B4-%EA%B5%AC%ED%98%84%ED%95%B4-%EB%91%94-%EA%B8%B0%EB%8A%A5-%EC%82%B4%ED%8E%B4%EB%B3%B4%EA%B8%B0\">1. 태그를 위해 구현해 둔 기능 살펴보기</a></p>\n</li>\n<li>\n<p><a href=\"#2-%ED%83%9C%EA%B7%B8-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-%EC%B6%94%EA%B0%80\">2. 태그 컴포넌트 추가</a></p>\n<ul>\n<li><a href=\"#%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-%EC%BD%94%EB%93%9C-%EC%9E%91%EC%84%B1\">컴포넌트 코드 작성</a></li>\n<li><a href=\"#%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-%EB%94%94%EC%9E%90%EC%9D%B8\">컴포넌트 디자인</a></li>\n<li><a href=\"#%ED%83%9C%EA%B7%B8%EB%A1%9C-%EA%B2%80%EC%83%89%EB%90%9C-%ED%8F%AC%EC%8A%A4%ED%8A%B8-%EB%AA%A9%EB%A1%9D-%ED%8E%98%EC%9D%B4%EC%A7%80-%EC%9E%91%EC%84%B1\">태그로 검색된 포스트 목록 페이지 작성</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#3-%EC%BF%BC%EB%A6%AC%EA%B0%80-%EC%A2%80-%EC%9D%B4%EC%83%81%ED%95%9C%EB%8D%B0-\">3. 쿼리가 좀 이상한데 ?</a></p>\n</li>\n</ul>","frontmatter":{"title":"개츠비로 블로그 시작하기 - 커스터마이징 (4)","date":"2021-11-29T23:05:43.028Z","description":"개츠비로 시작하는 블로그, 태그 기능을 추가하자","tags":["gatsby","개츠비","blog","블로그","tag","tags","태그","category","카테고리"]}},"previous":{"fields":{"slug":"/2021_11/05_gatsby_customization_3_search/"},"frontmatter":{"title":"개츠비로 블로그 시작하기 - 커스터마이징 (3)"}},"next":null},"pageContext":{"id":"fc48be77-11cc-51c2-aabd-c9aac2fd55c4","previousPostId":"ace6b2a0-ffbc-596d-9b02-296349141e2d","nextPostId":null}},
    "staticQueryHashes": ["3000541721","3274528899"]}