<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.8cc92189b8f4f159b763.css" data-identity="gatsby-global-css">@import url(http://fonts.googleapis.com/earlyaccess/notosanskr.css);@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/static/montserrat-latin-100-8d7d79679b70dbe27172b6460e7a7910.woff2) format("woff2"),url(/static/montserrat-latin-100-ec38980a9e0119a379e2a9b3dbb1901a.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/static/montserrat-latin-100italic-e279051046ba1286706adc886cf1c96b.woff2) format("woff2"),url(/static/montserrat-latin-100italic-3b325a3173c8207435cd1b76e19bf501.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/static/montserrat-latin-200-9d266fbbfa6cab7009bd56003b1eeb67.woff2) format("woff2"),url(/static/montserrat-latin-200-2d8ba08717110d27122e54c34b8a5798.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/static/montserrat-latin-200italic-6e5b3756583bb2263eb062eae992735e.woff2) format("woff2"),url(/static/montserrat-latin-200italic-a0d6f343e4b536c582926255367a57da.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/static/montserrat-latin-300-00b3e893aab5a8fd632d6342eb72551a.woff2) format("woff2"),url(/static/montserrat-latin-300-ea303695ceab35f17e7d062f30e0173b.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/static/montserrat-latin-300italic-56f34ea368f6aedf89583d444bbcb227.woff2) format("woff2"),url(/static/montserrat-latin-300italic-54b0bf2c8c4c12ffafd803be2466a790.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/static/montserrat-latin-400-b71748ae4f80ec8c014def4c5fa8688b.woff2) format("woff2"),url(/static/montserrat-latin-400-0659a9f4e90db5cf51b50d005bff1e41.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/static/montserrat-latin-400italic-6eed6b4cbb809c6efc7aa7ddad6dbe3e.woff2) format("woff2"),url(/static/montserrat-latin-400italic-7583622cfde30ae49086d18447ab28e7.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/static/montserrat-latin-500-091b209546e16313fd4f4fc36090c757.woff2) format("woff2"),url(/static/montserrat-latin-500-edd311588712a96bbf435fad264fff62.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/static/montserrat-latin-500italic-c90ced68b46050061d1a41842d6dfb43.woff2) format("woff2"),url(/static/montserrat-latin-500italic-5146cbfe02b1deea5dffea27a5f2f998.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/static/montserrat-latin-600-0480d2f8a71f38db8633b84d8722e0c2.woff2) format("woff2"),url(/static/montserrat-latin-600-b77863a375260a05dd13f86a1cee598f.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/static/montserrat-latin-600italic-cf46ffb11f3a60d7df0567f8851a1d00.woff2) format("woff2"),url(/static/montserrat-latin-600italic-c4fcfeeb057724724097167e57bd7801.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/static/montserrat-latin-700-7dbcc8a5ea2289d83f657c25b4be6193.woff2) format("woff2"),url(/static/montserrat-latin-700-99271a835e1cae8c76ef8bba99a8cc4e.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/static/montserrat-latin-700italic-c41ad6bdb4bd504a843d546d0a47958d.woff2) format("woff2"),url(/static/montserrat-latin-700italic-6779372f04095051c62ed36bc1dcc142.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/static/montserrat-latin-800-db9a3e0ba7eaea32e5f55328ace6cf23.woff2) format("woff2"),url(/static/montserrat-latin-800-4e3c615967a2360f5db87d2f0fd2456f.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/static/montserrat-latin-800italic-bf45bfa14805969eda318973947bc42b.woff2) format("woff2"),url(/static/montserrat-latin-800italic-fe82abb0bcede51bf724254878e0c374.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/static/montserrat-latin-900-e66c7edc609e24bacbb705175669d814.woff2) format("woff2"),url(/static/montserrat-latin-900-8211f418baeb8ec880b80ba3c682f957.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/static/montserrat-latin-900italic-4454c775e48152c1a72510ceed3603e2.woff2) format("woff2"),url(/static/montserrat-latin-900italic-efcaa0f6a82ee0640b83a0916e6e8d68.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/static/merriweather-latin-300-fc117160c69a8ea0851b26dd14748ee4.woff2) format("woff2"),url(/static/merriweather-latin-300-58b18067ebbd21fda77b67e73c241d3b.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/static/merriweather-latin-300italic-fe29961474f8dbf77c0aa7b9a629e4bc.woff2) format("woff2"),url(/static/merriweather-latin-300italic-23c3f1f88683618a4fb8d265d33d383a.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/static/merriweather-latin-400-d9479e8023bef9cbd9bf8d6eabd6bf36.woff2) format("woff2"),url(/static/merriweather-latin-400-040426f99ff6e00b86506452e0d1f10b.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/static/merriweather-latin-400italic-2de7bfeaf08fb03d4315d49947f062f7.woff2) format("woff2"),url(/static/merriweather-latin-400italic-79db67aca65f5285964ab332bd65f451.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/static/merriweather-latin-700-4b08e01d805fa35d7bf777f1b24314ae.woff2) format("woff2"),url(/static/merriweather-latin-700-22fb8afba4ab1f093b6ef9e28a9b6e92.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/static/merriweather-latin-700italic-cd92541b177652fffb6e3b952f1c33f1.woff2) format("woff2"),url(/static/merriweather-latin-700italic-f87f3d87cea0dd0979bfc8ac9ea90243.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/static/merriweather-latin-900-f813fc6a4bee46eda5224ac7ebf1b7be.woff2) format("woff2"),url(/static/merriweather-latin-900-5d4e42cb44410674acd99153d57df032.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/static/merriweather-latin-900italic-b7901d85486871c1779c0e93ddd85656.woff2) format("woff2"),url(/static/merriweather-latin-900italic-9647f9fdab98756989a8a5550eb205c3.woff) format("woff")}


/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{-webkit-text-size-adjust:100%;line-height:1.15}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden]{display:none}:root{--maxWidth-none:"none";--maxWidth-xs:20rem;--maxWidth-sm:24rem;--maxWidth-md:28rem;--maxWidth-lg:32rem;--maxWidth-xl:36rem;--maxWidth-2xl:42rem;--maxWidth-3xl:48rem;--maxWidth-4xl:56rem;--maxWidth-full:"100%";--maxWidth-wrapper:var(--maxWidth-3xl);--spacing-px:"1px";--spacing-0:0;--spacing-1:0.25rem;--spacing-2:0.5rem;--spacing-3:0.75rem;--spacing-4:1rem;--spacing-5:1.25rem;--spacing-6:1.5rem;--spacing-8:2rem;--spacing-10:2.5rem;--spacing-12:3rem;--spacing-16:4rem;--spacing-20:5rem;--spacing-24:6rem;--spacing-32:8rem;--fontFamily:-apple-system,BlinkMacSystemFont,"Noto Sans KR","Helvetica Neue","Roboto","Segoe UI","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans",sans-serif;--font-body:var(--fontFamily);--font-heading:var(--fontFamily);--fontWeight-normal:400;--fontWeight-medium:500;--fontWeight-semibold:600;--fontWeight-bold:700;--fontWeight-extrabold:800;--fontWeight-black:900;--fontSize-root:16px;--lineHeight-none:1;--lineHeight-tight:1.1;--lineHeight-normal:1.5;--lineHeight-relaxed:1.625;--fontSize-0:0.833rem;--fontSize-1:1rem;--fontSize-2:1.2rem;--fontSize-3:1.44rem;--fontSize-4:1.728rem;--fontSize-5:2.074rem;--fontSize-6:2.488rem;--fontSize-7:2.986rem;--color-primary:#2e353f;--color-text:#2e353f;--color-text-light:#4f5969;--color-heading:#1a202c;--color-heading-black:#000;--color-accent:#d1dce5;--tag-color:#f7f8fc;--tag-highlight-color:#a9a9a9}*,:after,:before{box-sizing:border-box}html{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-size:var(--fontSize-root);line-height:var(--lineHeight-normal);scroll-behavior:smooth}body{color:var(--color-text);font-family:var(--font-body);font-size:var(--fontSize-1)}footer{padding:var(--spacing-6) var(--spacing-0)}hr{background:var(--color-accent);border:0;height:1px}h1,h2,h3,h4,h5,h6{font-family:var(--font-heading);letter-spacing:-.025em;line-height:var(--lineHeight-tight);margin-bottom:var(--spacing-6);margin-top:var(--spacing-12)}h2,h3,h4,h5,h6{color:var(--color-heading);font-weight:var(--fontWeight-bold)}h1{color:var(--color-heading-black);font-size:var(--fontSize-6);font-weight:var(--fontWeight-black)}h2{font-size:var(--fontSize-5)}h3{font-size:var(--fontSize-4)}h4{font-size:var(--fontSize-3)}h5{font-size:var(--fontSize-2)}h6{font-size:var(--fontSize-1)}h1>a,h2>a,h3>a,h4>a,h5>a,h6>a{color:inherit;text-decoration:none}p{--baseline-multiplier:0.179;--x-height-multiplier:0.35;line-height:var(--lineHeight-relaxed);margin:var(--spacing-0) var(--spacing-0) var(--spacing-8) var(--spacing-0)}ol,p,ul{padding:var(--spacing-0)}ol,ul{list-style-image:none;list-style-position:outside;margin-bottom:var(--spacing-8);margin-left:var(--spacing-0);margin-right:var(--spacing-0)}ol li,ul li{padding-left:var(--spacing-0)}li>p,ol li,ul li{margin-bottom:calc(var(--spacing-8)/2)}li :last-child{margin-bottom:var(--spacing-0)}li>ul{margin-left:var(--spacing-8);margin-top:calc(var(--spacing-8)/2)}blockquote{border-left:var(--spacing-1) solid var(--color-primary);color:var(--color-text-light);font-size:var(--fontSize-2);font-style:italic;margin-bottom:var(--spacing-8);margin-left:calc(var(--spacing-6)*-1);margin-right:var(--spacing-8);padding:var(--spacing-0) var(--spacing-0) var(--spacing-0) var(--spacing-6)}blockquote>:last-child{margin-bottom:var(--spacing-0)}blockquote>ol,blockquote>ul{list-style-position:inside}table{border-collapse:collapse;border-spacing:.25rem;margin-bottom:var(--spacing-8);width:100%}table thead tr th{border-bottom:1px solid var(--color-accent)}a{color:var(--color-primary)}a:focus,a:hover{text-decoration:none}.global-wrapper{margin:var(--spacing-0) auto;max-width:var(--maxWidth-wrapper);padding:var(--spacing-10) var(--spacing-5)}.global-wrapper[data-is-root-path=true] .bio{margin-bottom:var(--spacing-20)}.global-header{margin-bottom:var(--spacing-12)}.main-heading{font-size:var(--fontSize-7);margin:0}.post-list-item{margin-bottom:var(--spacing-8);margin-top:var(--spacing-8)}.post-list-item p{margin-bottom:var(--spacing-0)}.post-list-item h2{color:var(--color-primary);font-size:var(--fontSize-4);margin-bottom:var(--spacing-2);margin-top:var(--spacing-0)}.post-list-item header{margin-bottom:var(--spacing-4)}.header-link-home{font-family:var(--font-heading);font-size:var(--fontSize-2);font-weight:var(--fontWeight-bold);text-decoration:none}.bio{display:flex;margin-bottom:var(--spacing-16)}.bio-avatar,.bio p{margin-bottom:var(--spacing-0)}.bio-avatar{border-radius:100%;margin-right:var(--spacing-4);min-width:50px}.blog-post header h1{margin:var(--spacing-0) var(--spacing-0) var(--spacing-4) var(--spacing-0)}.blog-post li{margin-left:1rem}.blog-post header p{font-family:var(--font-heading);font-size:var(--fontSize-2)}.blog-post-nav ul{margin:var(--spacing-0)}.table-of-contents{align-self:start;border-left:1px solid #efefef;padding-left:0;position:-webkit-sticky;position:sticky;top:2rem}.table-of-contents a{color:#ccc;display:block;padding:.125rem 0;text-decoration:none;transition:all 50ms ease-in-out}.table-of-contents a:focus,.table-of-contents a:hover{color:#666}.table-of-contents ol,.table-of-contents ul{list-style:none;margin:0;padding:0}.table-of-contents li{margin-left:1rem}.table-of-contents .active{color:#333;font-weight:500}.gatsby-highlight{margin-bottom:var(--spacing-8)}.toolbar .title{display:inline;font-size:xx-large;position:relative}.menu{float:right}.menu>*{font-size:xx-large;margin-left:10px}.search-box{border:2px solid grey;border-radius:30px;float:left}.search-box:hover>.search-text{margin-left:20px;width:300px}.search-button{align-items:center;background:none;border-radius:50%;display:flex;height:30px;justify-content:center;transition:all .4s;width:30px}.search-text{background:none;border:none;float:left;font-size:16px;line-height:30px;outline:none;padding:0;transition:.4s;width:0}.tag{background-color:var(--tag-color);border:2px solid #a9a9a9;border-radius:10px;color:var(--tag-highlight-color);line-height:2.5;margin-right:5px;padding:4px 8px;white-space:nowrap}.tag:link{text-decoration:none}.tag:hover{background-color:var(--tag-highlight-color);color:var(--tag-color);transform:scale(1.2)}@media screen and (max-width:110rem){.table-of-contents{display:none}}@media (max-width:42rem){blockquote{margin-left:var(--spacing-0);padding:var(--spacing-0) var(--spacing-0) var(--spacing-0) var(--spacing-4)}ol,ul{list-style-position:inside}}code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#ccc;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}:not(pre)>code[class*=language-]{background:#e3e9ee;border:1.2px solid #2d76c9;border-radius:.3em;color:#2d76c9;margin:0 .1em;padding:.11em .3em;white-space:normal}</style><meta name="generator" content="Gatsby 4.3.0"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){if(void 0===e.target.dataset.mainImage)return;if(void 0===e.target.dataset.gatsbyImageSsr)return;const t=e.target;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/rss.xml"/><link rel="icon" href="/favicon-32x32.png?v=4a9773549091c227cd2eb82ccd9c5e3a" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><title data-react-helmet="true">개츠비로 블로그 시작하기 - 커스터마이징 (3) | loelheim</title><meta data-react-helmet="true" name="description" content="개츠비로 시작하는 블로그, 검색 기능을 추가하자"/><meta data-react-helmet="true" property="og:title" content="개츠비로 블로그 시작하기 - 커스터마이징 (3)"/><meta data-react-helmet="true" property="og:description" content="개츠비로 시작하는 블로그, 검색 기능을 추가하자"/><meta data-react-helmet="true" property="og:type" content="website"/><link as="script" rel="preload" href="/webpack-runtime-c580888eb32eb323ac10.js"/><link as="script" rel="preload" href="/framework-91fcb8688cfb06592c2c.js"/><link as="script" rel="preload" href="/app-99111e41c9be7a3b0c6b.js"/><link as="script" rel="preload" href="/cb1608f2-a114316b1cb3096fafcd.js"/><link as="script" rel="preload" href="/2852872c-b2b17e6d0848f7e31174.js"/><link as="script" rel="preload" href="/commons-93657fdebe4187bbe246.js"/><link as="script" rel="preload" href="/573b27ab57743726e9d32c2d29ca767494f9c99f-fce3248f1a042b2435ab.js"/><link as="script" rel="preload" href="/d5d7a013bc6c1e2b6d7db819052c16d7efea5559-609403dfd4c51ec95e7c.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-40445c3deb5430fd6690.js"/><link as="fetch" rel="preload" href="/page-data/2021_11/05_gatsby_customization_3_search/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3000541721.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3274528899.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="global-wrapper" data-is-root-path="false"><header class="global-header"><div class="toolbar"><h2 class="title"><a href="/"></a></h2><div class="menu"><div class="search-box"><input type="text" class="search-text" placeholder="search" value=""/><div class="search-button"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="width:15px"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg></div></div></div></div></header><main><article class="blog-post" itemscope="" itemType="http://schema.org/Article"><header><h1 itemProp="headline">개츠비로 블로그 시작하기 - 커스터마이징 (3)</h1><p>2021년 11월 29일 19:35:08</p></header><section itemProp="articleBody"><h3 id="1-검색-기능을-구현하는-방법" style="position:relative;"><a href="#1-%EA%B2%80%EC%83%89-%EA%B8%B0%EB%8A%A5%EC%9D%84-%EA%B5%AC%ED%98%84%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95" aria-label="1 검색 기능을 구현하는 방법 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. 검색 기능을 구현하는 방법</h3>
<p><a href="https://www.gatsbyjs.com/docs/how-to/adding-common-features/adding-search/">공식 홈페이지</a>에서는 다양한 방법으로 검색을 추가하는 방법을 소개하고 있다.</p>
<p>일반적으로 블로그를 위해서 별도의 서버 API까지 구성해서 제공할 만큼 여유로운(?) 사람은 많지 않다고 생각해서 서버를 따로 구성하는 방법은 고려하지 않을 예정이다.</p>
<p>아무래도 로컬에서 제공하는 방법은 성능이나 최적화 부분에서는 한계가 있다고 생각하므로, 여유가 된다면 다른 방식도 적용해보면 어떨까 싶다.</p>
<h4 id="직접-구현하는-방법" style="position:relative;"><a href="#%EC%A7%81%EC%A0%91-%EA%B5%AC%ED%98%84%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95" aria-label="직접 구현하는 방법 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>직접 구현하는 방법</h4>
<ul>
<li>title, description 등에서 질의어가 포함되는지 체크하는 방식으로 직접 구현하는 방법</li>
</ul>
<h4 id="별도의-라이브러리를-사용하여-구현하는-방법" style="position:relative;"><a href="#%EB%B3%84%EB%8F%84%EC%9D%98-%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EC%97%AC-%EA%B5%AC%ED%98%84%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95" aria-label="별도의 라이브러리를 사용하여 구현하는 방법 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>별도의 라이브러리를 사용하여 구현하는 방법</h4>
<ul>
<li>
<p>js-search</p>
<ul>
<li>정적 데이터로부터 검색할 데이터를 가져와 내부적으로 인덱싱하는 방식으로 보임</li>
<li>검색 결과를 노출하기 위한 별도 컴포넌트는 제공하지 않아 구현 필요</li>
</ul>
</li>
</ul>
<h4 id="플러그인을-사용하여-구현하는-방법" style="position:relative;"><a href="#%ED%94%8C%EB%9F%AC%EA%B7%B8%EC%9D%B8%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%98%EC%97%AC-%EA%B5%AC%ED%98%84%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95" aria-label="플러그인을 사용하여 구현하는 방법 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>플러그인을 사용하여 구현하는 방법</h4>
<ul>
<li>
<p>gatsby-plugin-local-search</p>
<ul>
<li><code class="language-text">flexsearch</code>, <code class="language-text">Lunr</code> 등 다양한 엔진을 지원</li>
<li>공식 홈페이지에서는 가장 빠르고 메모리 사용량이 적은 <code class="language-text">flexsearch</code>를 추천 (성능 비교 : <a href="https://github.com/nextapps-de/flexsearch#performance-benchmark-ranking">링크</a>)</li>
<li><a href="https://github.com/angeloashmore/react-use-flexsearch">별도의 플러그인</a>으로 검색 결과를 보여주는 폼도 제공</li>
</ul>
</li>
<li>
<p>gatsby-plugin-elasticlunr-search</p>
<ul>
<li><code class="language-text">elasticlunr</code>가 데이터를 토큰화하고 분석하여 검색 결과를 제공</li>
<li><a href="https://yohanpro.com/posts/gatsby-search">검색하다 찾은 블로그</a>에서 한글이 지원되지 않는다는 이야기를 듣고 적용 포기</li>
</ul>
</li>
</ul>
<p>벤치마크와 결과 노출을 위한 플러그인 제공, 별도 언어를 위한 커스터마이징 옵션이 제공된다는 점에서 <code class="language-text">flexsearch</code>를 사용하지 않을 이유가 없다. 다만 적용해보려고 하니 고민이 되는 부분이 있어서 그냥 직접 구현해보기로 했다.</p>
<ul>
<li>동작에는 이슈가 없지만, 플러그인의 의존성이 <code class="language-text">gatsby: >= 2.20.0</code>로 매우 낮음</li>
<li>지금 하는 작업들이 국내에 최신 메이저 버전 기준으로 세팅하는 설명이 충분하지 않다고 생각해 정리하는 중</li>
<li><code class="language-text">flexsearch</code> 자체는 자주 업데이트되나, 플러그인은 최근 변경 사항이 없고 예시대로 적용하면 문제 발생</li>
</ul>
<p>사실 마지막 이유가 가장 걸렸다. <code class="language-text">path</code> 정보를 받는 방법은 파일을 생성하는 시점에 세팅하는 것이 가장 좋은 방법이라 <code class="language-text">frontman</code> 스크립트를 일부 변경하고 스키마를 추가해야 했다.
중간까지 진행해보다가 롤백을 했었는데 아마도 그렇게 한다면 모든 과정이 튜토리얼대로 잘 적용될 것이라 보인다.</p>
<h3 id="2-간단한-검색" style="position:relative;"><a href="#2-%EA%B0%84%EB%8B%A8%ED%95%9C-%EA%B2%80%EC%83%89" aria-label="2 간단한 검색 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. 간단한 검색</h3>
<p>간단하게 내가 생각하는 정의를 정리해보자면 다음과 같다.</p>
<blockquote>
<p>찾고자 하는 질의어를 입력하면, 질의어와 부합하는 항목을 결과로 제공한다</p>
</blockquote>
<p>사실 내 블로그에서 검색을 직접 하기보다는 검색 엔진 최적화로 들어오는 경우가 대부분일 것이고, 이후에 태그를 추가하여 같은 분류의 글은 확인할 수 있도록 남길 예정이기 때문에 검색이 갖는 의미가 크진 않을 것 같다.</p>
<p>때문에 정확한 검색을 지원하는 것은 나중의 일로 던져놓고 단어 위주의 검색으로 검색 기능을 해결하고자 한다. 참고로 본문을 인덱싱 하기에는 환경적인 어려움이 있어서 간단한 정보만 찾을 예정이다.</p>
<ul>
<li>
<p>입력</p>
<ul>
<li>단어 : 공백 제거 후 검색에 사용</li>
<li>문장 : 공백 단위로 자른 단어를 모아 처리</li>
</ul>
</li>
<li>
<p>검색 대상</p>
<ul>
<li>frontmatter : title, description, tags에 하나라도 포함되는 것이 있으면 노출</li>
</ul>
</li>
</ul>
<p>또한 검색 기능을 어떤 방식으로 구현할 것인지도 고민해봐야 한다.</p>
<p>현재 블로그에는 검색 버튼이나 검색 창을 둘만한 위치가 마땅하지 않다. 게다가 메인 화면과 포스트 상세 화면의 레이아웃도 약간의 차이가 있어서 공통화하기 어려운 부분도 있다.</p>
<p>이 때문에 상단 레이아웃을 공통화하여 첫 화면과 포스트 상세, 검색 결과 화면에서 모두 일관된 화면을 제공하도록 하려고 한다.</p>
<h3 id="3-직접-구현해보자" style="position:relative;"><a href="#3-%EC%A7%81%EC%A0%91-%EA%B5%AC%ED%98%84%ED%95%B4%EB%B3%B4%EC%9E%90" aria-label="3 직접 구현해보자 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. 직접 구현해보자</h3>
<h4 id="커스텀-툴바-레이아웃-추가" style="position:relative;"><a href="#%EC%BB%A4%EC%8A%A4%ED%85%80-%ED%88%B4%EB%B0%94-%EB%A0%88%EC%9D%B4%EC%95%84%EC%9B%83-%EC%B6%94%EA%B0%80" aria-label="커스텀 툴바 레이아웃 추가 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>커스텀 툴바 레이아웃 추가</h4>
<p>먼저 상단 레이아웃을 공통화하여 사용하려고 한다.</p>
<p>일관된 레이아웃이 뭔가 보기에도 좋아보이고 화면 구성할 때 고려해야 하는 것도 줄어들기 때문이다.</p>
<p>레이아웃에는 블로그 이름과 검색 버튼 정도만 노출해도 충분하지 않을까 싶다.</p>
<p>우선 검색 아이콘을 추가하기 위해 폰트를 좀 설치했다.</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token function">npm</span> <span class="token function">install</span> --save @fortawesome/fontawesome-svg-core
<span class="token function">npm</span> <span class="token function">install</span> --save @fortawesome/free-solid-svg-icons
<span class="token function">npm</span> <span class="token function">install</span> --save @fortawesome/react-fontawesome</code></pre></div>
<p>이후에 <code class="language-text">src/components/toolbar.js</code>를 아래와 같이 구성했다.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Link<span class="token punctuation">,</span> navigate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"gatsby"</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> FontAwesomeIcon <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@fortawesome/react-fontawesome"</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> faSearch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@fortawesome/free-solid-svg-icons"</span>

<span class="token keyword">const</span> <span class="token function-variable function">search</span> <span class="token operator">=</span> <span class="token parameter">query</span> <span class="token operator">=></span> <span class="token punctuation">{</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>query<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">navigate</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/search?query=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>query<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">Toolbar</span> <span class="token operator">=</span> <span class="token parameter">props</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>query<span class="token punctuation">,</span> setQuery<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"toolbar"</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>h2 className<span class="token operator">=</span><span class="token string">"title"</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">"/"</span><span class="token operator">></span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>title <span class="token operator">||</span> <span class="token string">"loelheim"</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">></span>

      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"menu"</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"search-box"</span><span class="token operator">></span>
          <span class="token operator">&lt;</span>input
            type<span class="token operator">=</span><span class="token string">"text"</span>
            className<span class="token operator">=</span><span class="token string">"search-text"</span>
            placeholder<span class="token operator">=</span><span class="token string">"search"</span>
            value<span class="token operator">=</span><span class="token punctuation">{</span>query<span class="token punctuation">}</span>
            onKeyDown<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">"Enter"</span> <span class="token operator">?</span> <span class="token function">search</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
            onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> target<span class="token operator">:</span> <span class="token punctuation">{</span> value <span class="token punctuation">}</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setQuery</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span>
          <span class="token operator">/</span><span class="token operator">></span>
          <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"search-button"</span><span class="token operator">></span>
            <span class="token operator">&lt;</span>FontAwesomeIcon
              icon<span class="token operator">=</span><span class="token punctuation">{</span>faSearch<span class="token punctuation">}</span>
              style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> width<span class="token operator">:</span> <span class="token string">"15px"</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
              onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">search</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">}</span>
            <span class="token operator">/</span><span class="token operator">></span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Toolbar</code></pre></div>
<p><code class="language-text">useState</code>로 함수형 컴포넌트에서도 상태를 관리할 수 있게끔 했고, 선언한 <code class="language-text">query</code>를 <code class="language-text">&lt;Input /></code>에 연동했다. 값이 바뀌면 해당 값이 상태에 저장되도록 할당했고, 엔터가 입력거나 아이콘을 누르면 검색이 되도록 이벤트 리스너를 등록했다.</p>
<h4 id="관련-css-추가" style="position:relative;"><a href="#%EA%B4%80%EB%A0%A8-css-%EC%B6%94%EA%B0%80" aria-label="관련 css 추가 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>관련 CSS 추가</h4>
<div class="gatsby-highlight" data-language="css"><pre class="language-css"><code class="language-css"><span class="token selector">.toolbar .title</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> inline<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> xx-large<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.menu</span> <span class="token punctuation">{</span>
  <span class="token property">float</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.menu > *</span> <span class="token punctuation">{</span>
  <span class="token property">margin-left</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.menu > *</span> <span class="token punctuation">{</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> xx-large<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.search-box</span> <span class="token punctuation">{</span>
  <span class="token property">border-color</span><span class="token punctuation">:</span> grey<span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
  <span class="token property">border-style</span><span class="token punctuation">:</span> solid<span class="token punctuation">;</span>
  <span class="token property">border-width</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>
  <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.search-box:hover > .search-text</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
  <span class="token property">margin-left</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.search-button</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> all .4s<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.search-text</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
  <span class="token property">outline</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> .4s<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>CSS는 여기저기 내용을 찾으면서 지금 현 상태에 어울리는 형태로 작업해서 약간 부족할 수 있으나, 깔끔하게 나오는 것 같아서 이정도로만 마무리하려고 한다.</p>
<h4 id="검색화면-추가" style="position:relative;"><a href="#%EA%B2%80%EC%83%89%ED%99%94%EB%A9%B4-%EC%B6%94%EA%B0%80" aria-label="검색화면 추가 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>검색화면 추가</h4>
<p><code class="language-text">src/pages/{페이지 이름}</code>으로 컴포넌트를 제공하면 <code class="language-text">{주소}/{페이지 이름}</code> 형태로 접근 가능하도록 구성되어 있다. 위에서 검색 시, <code class="language-text">navigate(`/search?query=${query}`)</code>로 페이지를 이동하도록 구성했기 때문에, <code class="language-text">src/pages/search.js</code>를 만들고 이 곳에 검색 결과를 구현할 예정이다.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> React <span class="token keyword">from</span> <span class="token string">"react"</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useStaticQuery<span class="token punctuation">,</span> graphql <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"gatsby"</span>

<span class="token keyword">import</span> Layout <span class="token keyword">from</span> <span class="token string">"../components/layout"</span>

<span class="token keyword">const</span> <span class="token function-variable function">SearchComponent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> location <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>

    <span class="token keyword">const</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span>location<span class="token punctuation">.</span>search<span class="token punctuation">)</span>
    <span class="token keyword">const</span> query <span class="token operator">=</span> params<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'query'</span><span class="token punctuation">)</span>

    <span class="token comment">// TODO : 검색 기능 구현</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>Layout location<span class="token operator">=</span><span class="token punctuation">{</span>location<span class="token punctuation">}</span><span class="token operator">></span>
            <span class="token operator">&lt;</span>div<span class="token operator">></span>
            <span class="token punctuation">{</span>query<span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Layout<span class="token operator">></span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> SearchComponent</code></pre></div>
<p>간단하게 요청 파라미터로 전달된 값을 받아온 후, 질의어를 정제한 다음 모든 문서와 비교하여 매칭이 되는 포스트를 <code class="language-text">{query}</code> 대신 넣어주면 검색 기능은 끝난다.</p>
<h4 id="검색-기능-구현" style="position:relative;"><a href="#%EA%B2%80%EC%83%89-%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84" aria-label="검색 기능 구현 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>검색 기능 구현</h4>
<p>완성된 코드는 다음과 같다.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> React <span class="token keyword">from</span> <span class="token string">"react"</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Link<span class="token punctuation">,</span> useStaticQuery<span class="token punctuation">,</span> graphql <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"gatsby"</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> formatTime <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../util/formatter"</span>

<span class="token keyword">import</span> Layout <span class="token keyword">from</span> <span class="token string">"../components/layout"</span>

<span class="token keyword">const</span> regexToRefine <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[^@0-9a-zA-Z가-힣 _-]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span>

<span class="token keyword">const</span> <span class="token function-variable function">refineQuery</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">query</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>

  <span class="token keyword">const</span> tokens <span class="token operator">=</span> query<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span>regexToRefine<span class="token punctuation">,</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">token</span><span class="token punctuation">)</span> <span class="token operator">=></span> token<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> tokens<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">token</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> token
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">SearchComponent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> location <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span>location<span class="token punctuation">.</span>search<span class="token punctuation">)</span>
  <span class="token keyword">const</span> query <span class="token operator">=</span> params<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"query"</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> tokens <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token function">refineQuery</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token comment">// 블로그 데이터 조회</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> allMarkdownRemark <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useStaticQuery</span><span class="token punctuation">(</span>graphql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    query {
      allMarkdownRemark(sort: { fields: [frontmatter___date], order: DESC }) {
        nodes {
          id
          fields {
            slug
          }
          frontmatter {
            date
            title
            description
            tags
          }
        }
      }
    }
  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> posts <span class="token operator">=</span> allMarkdownRemark<span class="token punctuation">.</span>nodes

  <span class="token comment">// 점수 계산</span>
  posts<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">post</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>

    <span class="token keyword">const</span> <span class="token punctuation">{</span> title<span class="token punctuation">,</span> description<span class="token punctuation">,</span> tags <span class="token punctuation">}</span> <span class="token operator">=</span> post<span class="token punctuation">.</span>frontmatter
    <span class="token keyword">const</span> words <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span><span class="token function">refineQuery</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token function">refineQuery</span><span class="token punctuation">(</span>description<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">...</span>tags<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">word</span><span class="token punctuation">)</span> <span class="token operator">=></span> word<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

    <span class="token keyword">let</span> score <span class="token operator">=</span> <span class="token number">0</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> token <span class="token keyword">of</span> tokens<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> word <span class="token keyword">of</span> words<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            
            <span class="token keyword">if</span> <span class="token punctuation">(</span>token<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>word<span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">||</span> word<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                score <span class="token operator">+=</span> <span class="token number">1</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    post<span class="token punctuation">.</span>score <span class="token operator">=</span> score
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">// 점수 기준 렌더링 및 기준 미달 제거</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> posts
    <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">post</span> <span class="token operator">=></span> post<span class="token punctuation">.</span>score <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">post1<span class="token punctuation">,</span> post2</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>post1<span class="token punctuation">.</span>score <span class="token operator">===</span> post2<span class="token punctuation">.</span>score<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> post1<span class="token punctuation">.</span>date <span class="token operator">></span> post2<span class="token punctuation">.</span>date <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> post1<span class="token punctuation">.</span>score <span class="token operator">></span> post2<span class="token punctuation">.</span>score <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> <span class="token number">1</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">// 결과 렌더링</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>result<span class="token operator">?.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>Layout location<span class="token operator">=</span><span class="token punctuation">{</span>location<span class="token punctuation">}</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>div<span class="token operator">></span>검색 결과가 없습니다<span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Layout<span class="token operator">></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Layout location<span class="token operator">=</span><span class="token punctuation">{</span>location<span class="token punctuation">}</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>div<span class="token operator">></span>

        <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">{query}</span><span class="token template-punctuation string">`</span></span>에 대한 검색 결과입니다<span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>

        <span class="token operator">&lt;</span>ol style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> listStyle<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">none</span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span>
        <span class="token punctuation">{</span>result<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">post</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> title <span class="token operator">=</span> post<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>title <span class="token operator">||</span> post<span class="token punctuation">.</span>fields<span class="token punctuation">.</span>slug

          <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>post<span class="token punctuation">.</span>fields<span class="token punctuation">.</span>slug<span class="token punctuation">}</span><span class="token operator">></span>
              <span class="token operator">&lt;</span>article
                className<span class="token operator">=</span><span class="token string">"post-list-item"</span>
                itemScope
                itemType<span class="token operator">=</span><span class="token string">"http://schema.org/Article"</span>
              <span class="token operator">></span>
                <span class="token operator">&lt;</span>header<span class="token operator">></span>
                  <span class="token operator">&lt;</span>h2<span class="token operator">></span>
                    <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token punctuation">{</span>post<span class="token punctuation">.</span>fields<span class="token punctuation">.</span>slug<span class="token punctuation">}</span> itemProp<span class="token operator">=</span><span class="token string">"url"</span><span class="token operator">></span>
                      <span class="token operator">&lt;</span>span itemProp<span class="token operator">=</span><span class="token string">"headline"</span><span class="token operator">></span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span>
                  <span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">></span>
                  <span class="token operator">&lt;</span>small<span class="token operator">></span><span class="token punctuation">{</span><span class="token function">formatTime</span><span class="token punctuation">(</span>post<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>date<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>small<span class="token operator">></span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>header<span class="token operator">></span>
                <span class="token operator">&lt;</span>section<span class="token operator">></span>
                  <span class="token operator">&lt;</span>p
                    dangerouslySetInnerHTML<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
                      __html<span class="token operator">:</span> post<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>description <span class="token operator">||</span> post<span class="token punctuation">.</span>excerpt<span class="token punctuation">,</span>
                    <span class="token punctuation">}</span><span class="token punctuation">}</span>
                    itemProp<span class="token operator">=</span><span class="token string">"description"</span>
                  <span class="token operator">/</span><span class="token operator">></span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>section<span class="token operator">></span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>article<span class="token operator">></span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
          <span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>ol<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Layout<span class="token operator">></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> SearchComponent</code></pre></div>
<p>구현한 내용에 대해서 하나씩 살펴보자.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token punctuation">{</span> allMarkdownRemark <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useStaticQuery</span><span class="token punctuation">(</span>graphql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  query {
    allMarkdownRemark(sort: { fields: [frontmatter___date], order: DESC }) {
      nodes {
        id
        fields {
          slug
        }
        frontmatter {
          date
          title
          description
          tags
        }
      }
    }
  }
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>

<span class="token keyword">const</span> posts <span class="token operator">=</span> allMarkdownRemark<span class="token punctuation">.</span>nodes</code></pre></div>
<p>블로그 데이터 조회는 여느 쿼리와 비슷하게 <code class="language-text">GraphQL</code>을 사용하며, 검색을 위해 필요한 <code class="language-text">frontmatter</code> 필드를 추가한 것 외에는 크게 다를 것이 없다.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> regexToRefine <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[^@0-9a-zA-Z가-힣 _-]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span>

<span class="token keyword">const</span> <span class="token function-variable function">refineQuery</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">query</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>

  <span class="token keyword">const</span> tokens <span class="token operator">=</span> query<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span>regexToRefine<span class="token punctuation">,</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">token</span><span class="token punctuation">)</span> <span class="token operator">=></span> token<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> tokens<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">token</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> token
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">SearchComponent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> location <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>

  posts<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">post</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>

    <span class="token keyword">const</span> <span class="token punctuation">{</span> title<span class="token punctuation">,</span> description<span class="token punctuation">,</span> tags <span class="token punctuation">}</span> <span class="token operator">=</span> post<span class="token punctuation">.</span>frontmatter
    <span class="token keyword">const</span> words <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span><span class="token function">refineQuery</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token function">refineQuery</span><span class="token punctuation">(</span>description<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">...</span>tags<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">word</span><span class="token punctuation">)</span> <span class="token operator">=></span> word<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

    <span class="token keyword">let</span> score <span class="token operator">=</span> <span class="token number">0</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> token <span class="token keyword">of</span> tokens<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> word <span class="token keyword">of</span> words<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            
            <span class="token keyword">if</span> <span class="token punctuation">(</span>token<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>word<span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">||</span> word<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                score <span class="token operator">+=</span> <span class="token number">1</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    post<span class="token punctuation">.</span>score <span class="token operator">=</span> score
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  posts<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">post1<span class="token punctuation">,</span> post2</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>post1<span class="token punctuation">.</span>score <span class="token operator">===</span> post2<span class="token punctuation">.</span>score<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> post1<span class="token punctuation">.</span>date <span class="token operator">></span> post2<span class="token punctuation">.</span>date <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> post1<span class="token punctuation">.</span>score <span class="token operator">></span> post2<span class="token punctuation">.</span>score <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> <span class="token number">1</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> result <span class="token operator">=</span> posts<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">post</span><span class="token punctuation">)</span> <span class="token operator">=></span> post<span class="token punctuation">.</span>score <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p>모든 포스트마다 검색에 사용할 단어를 추출하고 소문자로 변경한 다음 중복을 제거한 다음, 검색어 질의와 비교하여 포함되는게 있다면 1점 가산하는 방식으로 단순하게 계산했다. 아무래도 검색의 의도를 파악하기에 어려운 부분은 있더라도 쉽고 단순하게 구현 가능한 방법일 것이다.</p>
<p>만약 점수가 같다면 최신 데이터를 순차적으로 가져오도록 정렬했고, 0점인 항목은 제거하도록 했다.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">SearchComponent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> location <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>

  <span class="token comment">// 결과 렌더링</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>result<span class="token operator">?.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>Layout location<span class="token operator">=</span><span class="token punctuation">{</span>location<span class="token punctuation">}</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>div<span class="token operator">></span>검색 결과가 없습니다<span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Layout<span class="token operator">></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Layout location<span class="token operator">=</span><span class="token punctuation">{</span>location<span class="token punctuation">}</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>div<span class="token operator">></span>

        <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">{query}</span><span class="token template-punctuation string">`</span></span>에 대한 검색 결과입니다<span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>

        <span class="token operator">&lt;</span>ol style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> listStyle<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">none</span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span>
        <span class="token punctuation">{</span>result<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">post</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> title <span class="token operator">=</span> post<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>title <span class="token operator">||</span> post<span class="token punctuation">.</span>fields<span class="token punctuation">.</span>slug

          <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>post<span class="token punctuation">.</span>fields<span class="token punctuation">.</span>slug<span class="token punctuation">}</span><span class="token operator">></span>
              <span class="token operator">&lt;</span>article
                className<span class="token operator">=</span><span class="token string">"post-list-item"</span>
                itemScope
                itemType<span class="token operator">=</span><span class="token string">"http://schema.org/Article"</span>
              <span class="token operator">></span>
                <span class="token operator">&lt;</span>header<span class="token operator">></span>
                  <span class="token operator">&lt;</span>h2<span class="token operator">></span>
                    <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token punctuation">{</span>post<span class="token punctuation">.</span>fields<span class="token punctuation">.</span>slug<span class="token punctuation">}</span> itemProp<span class="token operator">=</span><span class="token string">"url"</span><span class="token operator">></span>
                      <span class="token operator">&lt;</span>span itemProp<span class="token operator">=</span><span class="token string">"headline"</span><span class="token operator">></span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span>
                  <span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">></span>
                  <span class="token operator">&lt;</span>small<span class="token operator">></span><span class="token punctuation">{</span><span class="token function">formatTime</span><span class="token punctuation">(</span>post<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>date<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>small<span class="token operator">></span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>header<span class="token operator">></span>
                <span class="token operator">&lt;</span>section<span class="token operator">></span>
                  <span class="token operator">&lt;</span>p
                    dangerouslySetInnerHTML<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
                      __html<span class="token operator">:</span> post<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>description <span class="token operator">||</span> post<span class="token punctuation">.</span>excerpt<span class="token punctuation">,</span>
                    <span class="token punctuation">}</span><span class="token punctuation">}</span>
                    itemProp<span class="token operator">=</span><span class="token string">"description"</span>
                  <span class="token operator">/</span><span class="token operator">></span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>section<span class="token operator">></span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>article<span class="token operator">></span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
          <span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>ol<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Layout<span class="token operator">></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p>결과 렌더링은 <code class="language-text">src/pages/index.js</code>의 내용을 거의 그대로 가져왔다. 모듈화를 해서 구성해도 좋은데, 혹시나 추후에 커스터마이징 할 여지가 있을까 싶어서 우선은 그대로 두었다.</p>
<h3 id="4-플러그인을-사용하게-된다면" style="position:relative;"><a href="#4-%ED%94%8C%EB%9F%AC%EA%B7%B8%EC%9D%B8%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B2%8C-%EB%90%9C%EB%8B%A4%EB%A9%B4" aria-label="4 플러그인을 사용하게 된다면 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4. 플러그인을 사용하게 된다면</h3>
<p>이대로 끝내기에는 약간 아쉬워서 플러그인이 어떻게 동작할지를 살펴보았다.</p>
<p>우선 구현에 필요한 의존성을 설치해야 했기 때문에, 설치를 했고 이후에 관련 설정을 추가했다. <a href="https://www.gatsbyjs.com/plugins/gatsby-plugin-local-search/">플러그인 설명 페이지</a>에 나온 대로 <code class="language-text">gatsby-config.js</code>을 열고 아래와 같이 수정해보자.</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token function">npm</span> <span class="token function">install</span> --save gatsby-plugin-local-search</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      resolve<span class="token operator">:</span> <span class="token string">'gatsby-plugin-local-search'</span><span class="token punctuation">,</span>
      options<span class="token operator">:</span> <span class="token punctuation">{</span>

        name<span class="token operator">:</span> <span class="token string">'pages'</span><span class="token punctuation">,</span>
        engine<span class="token operator">:</span> <span class="token string">'flexsearch'</span><span class="token punctuation">,</span>
        engineOptions<span class="token operator">:</span> <span class="token string">'speed'</span><span class="token punctuation">,</span>
        query<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
          {
            allMarkdownRemark {
              nodes {
                id
                frontmatter {
                  title
                  description
                  tags
                }
                rawMarkdownBody
              }
            }
          }
        </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>

        ref<span class="token operator">:</span> <span class="token string">'id'</span><span class="token punctuation">,</span>
        index<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'description'</span><span class="token punctuation">,</span> <span class="token string">'body'</span><span class="token punctuation">,</span> <span class="token string">'tags'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        store<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">,</span> <span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'description'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token function-variable function">normalizer</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> data <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span>
          data<span class="token punctuation">.</span>allMarkdownRemark<span class="token punctuation">.</span>nodes<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
            id<span class="token operator">:</span> node<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
            title<span class="token operator">:</span> node<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>title<span class="token punctuation">,</span>
            description<span class="token operator">:</span> node<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>description<span class="token punctuation">,</span>
            tags<span class="token operator">:</span> node<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>tags<span class="token punctuation">,</span>
            body<span class="token operator">:</span> node<span class="token punctuation">.</span>rawMarkdownBody<span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>설정이 마무리된 후, 다음 쿼리를 날리면 아래 형태의 JSON이 나온다.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">{
  localSearchPages {
    index
    store
  }
}</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token punctuation">{</span>
  <span class="token string">"data"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">"localSearchPages"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">"index"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token string">"0"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"f84ec0e5-c2a8-5b1e-99c4-62eb393a97e6"</span><span class="token punctuation">,</span><span class="token string">"d0229a72-199f-5206-8a55-d87c76514208"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">"n"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"b2c7e184-b869-5c3c-9d28-4b72a0653bef"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token operator">...</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token string">"store"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">"f84ec0e5-c2a8-5b1e-99c4-62eb393a97e6"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string">"id"</span><span class="token operator">:</span> <span class="token string">"f84ec0e5-c2a8-5b1e-99c4-62eb393a97e6"</span><span class="token punctuation">,</span>
          <span class="token string">"title"</span><span class="token operator">:</span> <span class="token string">"개츠비로 블로그 시작하기 - 커스터마이징 (2)"</span><span class="token punctuation">,</span>
          <span class="token string">"description"</span><span class="token operator">:</span> <span class="token string">"개츠비로 시작하는 블로그, 포스트에 목차를 추가하자"</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">"b1b8261f-595f-58e0-9cdd-ab41d00780da"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string">"id"</span><span class="token operator">:</span> <span class="token string">"b1b8261f-595f-58e0-9cdd-ab41d00780da"</span><span class="token punctuation">,</span>
          <span class="token string">"title"</span><span class="token operator">:</span> <span class="token string">"개츠비로 블로그 시작하기 - 커스터마이징 (1)"</span><span class="token punctuation">,</span>
          <span class="token string">"description"</span><span class="token operator">:</span> <span class="token string">"개츠비로 시작하는 블로그, 글쓰기 기능을 추가해보자"</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">"d0229a72-199f-5206-8a55-d87c76514208"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string">"id"</span><span class="token operator">:</span> <span class="token string">"d0229a72-199f-5206-8a55-d87c76514208"</span><span class="token punctuation">,</span>
          <span class="token string">"title"</span><span class="token operator">:</span> <span class="token string">"개츠비로 블로그 시작하기 - 개인화"</span><span class="token punctuation">,</span>
          <span class="token string">"description"</span><span class="token operator">:</span> <span class="token string">"개츠비로 시작하는 블로그, 블로그에 내 정보를 담아보자"</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">"fa584ab1-81a8-57ea-828c-a0b01e782191"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string">"id"</span><span class="token operator">:</span> <span class="token string">"fa584ab1-81a8-57ea-828c-a0b01e782191"</span><span class="token punctuation">,</span>
          <span class="token string">"title"</span><span class="token operator">:</span> <span class="token string">"개츠비로 블로그 시작하기 - 설치 및 구동"</span><span class="token punctuation">,</span>
          <span class="token string">"description"</span><span class="token operator">:</span> <span class="token string">"개츠비로 시작하는 블로그, 실제로 설치해보고 작업 환경에서 돌려보자"</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">"ace6b2a0-ffbc-596d-9b02-296349141e2d"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string">"id"</span><span class="token operator">:</span> <span class="token string">"ace6b2a0-ffbc-596d-9b02-296349141e2d"</span><span class="token punctuation">,</span>
          <span class="token string">"title"</span><span class="token operator">:</span> <span class="token string">"개츠비로 블로그 시작하기 - 커스터마이징 (3)"</span><span class="token punctuation">,</span>
          <span class="token string">"description"</span><span class="token operator">:</span> <span class="token string">"개츠비로 시작하는 블로그, 검색 기능을 추가하자"</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">"b2c7e184-b869-5c3c-9d28-4b72a0653bef"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string">"id"</span><span class="token operator">:</span> <span class="token string">"b2c7e184-b869-5c3c-9d28-4b72a0653bef"</span><span class="token punctuation">,</span>
          <span class="token string">"title"</span><span class="token operator">:</span> <span class="token string">"개츠비로 블로그 시작하기 - 플랫폼 선정"</span><span class="token punctuation">,</span>
          <span class="token string">"description"</span><span class="token operator">:</span> <span class="token string">"개츠비로 시작하는 블로그, 어떤 플랫폼이 좋을까?"</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">"extensions"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>아마 <code class="language-text">store</code>에 대한 정보는 결과로 제공받을 항목을 <code class="language-text">id</code>를 키로 하는 <code class="language-text">store</code> 객체에 보관되고, 토큰화 된 단어는 <code class="language-text">index</code>에 저장된다. 보이는 형식은 객체 타입이지만 실제로는 문자열 형태로 저장되어 있는데 아마도 로직에서 관련 데이터를 <code class="language-text">JSON.parse()</code>로 처리한 후, 별도의 로직으로 점수를 계산하여 결과를 도출하지 않을까 추측해본다.</p>
<h3 id="5-만약-별도의-검색-서버를-사용한다면-" style="position:relative;"><a href="#5-%EB%A7%8C%EC%95%BD-%EB%B3%84%EB%8F%84%EC%9D%98-%EA%B2%80%EC%83%89-%EC%84%9C%EB%B2%84%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C%EB%8B%A4%EB%A9%B4-" aria-label="5 만약 별도의 검색 서버를 사용한다면  permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5. 만약 별도의 검색 서버를 사용한다면 ?</h3>
<p>아마도 서버를 사용하게 된다면 이렇게 구성할 것 같다.</p>
<ul>
<li>웹훅을 걸어 블로그 레포지토리에 푸시를 감지하면 별도 서버에서 원문 데이터를 다운로드</li>
<li>원본 데이터를 색인, 검색할 수 있도록 <code class="language-text">Sphinx</code>나 <code class="language-text">ElasticSearch</code>에 추가</li>
<li>별도 API 서버를 띄워서 연결하고 블로그에서 제공할 수 있도록 구성</li>
</ul>
<p>말은 쉬운데 제한된 환경에서 검색 기능을 제공하려니 아쉬운게 많았나보다.</p>
<h3 id="reference" style="position:relative;"><a href="#reference" aria-label="reference permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Reference</h3>
<ul>
<li><a href="https://yohanpro.com/posts/gatsby-search">https://yohanpro.com/posts/gatsby-search</a></li>
</ul></section><hr/><footer><div style="margin-bottom:40px"><a class="tag" href="/tags?tag=gatsby">gatsby</a><a class="tag" href="/tags?tag=개츠비">개츠비</a><a class="tag" href="/tags?tag=blog">blog</a><a class="tag" href="/tags?tag=블로그">블로그</a><a class="tag" href="/tags?tag=검색">검색</a></div><div class="bio"><div data-gatsby-image-wrapper="" style="width:50px;height:50px" class="gatsby-image-wrapper bio-avatar"><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#f8f8f8;width:50px;height:50px;position:relative"></div><picture><source type="image/avif" data-srcset="/static/5f9f01fc0b442399571b1f0d34b58dce/d4bf4/profile-pic.avif 50w,/static/5f9f01fc0b442399571b1f0d34b58dce/ee81f/profile-pic.avif 100w" sizes="50px"/><source type="image/webp" data-srcset="/static/5f9f01fc0b442399571b1f0d34b58dce/3faea/profile-pic.webp 50w,/static/5f9f01fc0b442399571b1f0d34b58dce/6a679/profile-pic.webp 100w" sizes="50px"/><img data-gatsby-image-ssr="" layout="fixed" data-main-image="" style="opacity:0" sizes="50px" decoding="async" loading="lazy" data-src="/static/5f9f01fc0b442399571b1f0d34b58dce/e5610/profile-pic.png" data-srcset="/static/5f9f01fc0b442399571b1f0d34b58dce/e5610/profile-pic.png 50w,/static/5f9f01fc0b442399571b1f0d34b58dce/e9b55/profile-pic.png 100w" alt="Profile picture"/></picture><noscript><picture><source type="image/avif" srcSet="/static/5f9f01fc0b442399571b1f0d34b58dce/d4bf4/profile-pic.avif 50w,/static/5f9f01fc0b442399571b1f0d34b58dce/ee81f/profile-pic.avif 100w" sizes="50px"/><source type="image/webp" srcSet="/static/5f9f01fc0b442399571b1f0d34b58dce/3faea/profile-pic.webp 50w,/static/5f9f01fc0b442399571b1f0d34b58dce/6a679/profile-pic.webp 100w" sizes="50px"/><img data-gatsby-image-ssr="" layout="fixed" data-main-image="" style="opacity:0" sizes="50px" decoding="async" loading="lazy" src="/static/5f9f01fc0b442399571b1f0d34b58dce/e5610/profile-pic.png" srcSet="/static/5f9f01fc0b442399571b1f0d34b58dce/e5610/profile-pic.png 50w,/static/5f9f01fc0b442399571b1f0d34b58dce/e9b55/profile-pic.png 100w" alt="Profile picture"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1)}}</script></div><p>Written by <strong>loel</strong> <br/>Backend developer</p></div></footer></article><nav class="blog-post-nav"><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li><a rel="prev" href="/2021_11/04_gatsby_customization_2_toc/">← <!-- -->개츠비로 블로그 시작하기 - 커스터마이징 (2)</a></li><li><a rel="next" href="/2021_11/06_gatsby_customization_4_tag/">개츠비로 블로그 시작하기 - 커스터마이징 (4)<!-- --> →</a></li></ul></nav><div class="table-of-contents" style="right:calc(10vw);position:fixed;top:180px"><ul>
<li>
<p><a href="#1-%EA%B2%80%EC%83%89-%EA%B8%B0%EB%8A%A5%EC%9D%84-%EA%B5%AC%ED%98%84%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95">1. 검색 기능을 구현하는 방법</a></p>
<ul>
<li><a href="#%EC%A7%81%EC%A0%91-%EA%B5%AC%ED%98%84%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95">직접 구현하는 방법</a></li>
<li><a href="#%EB%B3%84%EB%8F%84%EC%9D%98-%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EC%97%AC-%EA%B5%AC%ED%98%84%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95">별도의 라이브러리를 사용하여 구현하는 방법</a></li>
<li><a href="#%ED%94%8C%EB%9F%AC%EA%B7%B8%EC%9D%B8%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%98%EC%97%AC-%EA%B5%AC%ED%98%84%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95">플러그인을 사용하여 구현하는 방법</a></li>
</ul>
</li>
<li>
<p><a href="#2-%EA%B0%84%EB%8B%A8%ED%95%9C-%EA%B2%80%EC%83%89">2. 간단한 검색</a></p>
</li>
<li>
<p><a href="#3-%EC%A7%81%EC%A0%91-%EA%B5%AC%ED%98%84%ED%95%B4%EB%B3%B4%EC%9E%90">3. 직접 구현해보자</a></p>
<ul>
<li><a href="#%EC%BB%A4%EC%8A%A4%ED%85%80-%ED%88%B4%EB%B0%94-%EB%A0%88%EC%9D%B4%EC%95%84%EC%9B%83-%EC%B6%94%EA%B0%80">커스텀 툴바 레이아웃 추가</a></li>
<li><a href="#%EA%B4%80%EB%A0%A8-css-%EC%B6%94%EA%B0%80">관련 CSS 추가</a></li>
<li><a href="#%EA%B2%80%EC%83%89%ED%99%94%EB%A9%B4-%EC%B6%94%EA%B0%80">검색화면 추가</a></li>
<li><a href="#%EA%B2%80%EC%83%89-%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84">검색 기능 구현</a></li>
</ul>
</li>
<li>
<p><a href="#4-%ED%94%8C%EB%9F%AC%EA%B7%B8%EC%9D%B8%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B2%8C-%EB%90%9C%EB%8B%A4%EB%A9%B4">4. 플러그인을 사용하게 된다면</a></p>
</li>
<li>
<p><a href="#5-%EB%A7%8C%EC%95%BD-%EB%B3%84%EB%8F%84%EC%9D%98-%EA%B2%80%EC%83%89-%EC%84%9C%EB%B2%84%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C%EB%8B%A4%EB%A9%B4-">5. 만약 별도의 검색 서버를 사용한다면 ?</a></p>
</li>
<li>
<p><a href="#reference">Reference</a></p>
</li>
</ul></div></main><footer>Copyright © <!-- -->2021<!-- --> <!-- -->loelheim<!-- --> All rights reserved.<!-- --> <br/>Built with <!-- --> <!-- --> <a href="https://www.gatsbyjs.com">Gatsby</a></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2021_11/05_gatsby_customization_3_search/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-14e0012b16034d67448d.js"],"app":["/app-99111e41c9be7a3b0c6b.js"],"component---src-pages-404-js":["/component---src-pages-404-js-72901f4fd5f8f9601243.js"],"component---src-pages-index-js":["/component---src-pages-index-js-4f1501ff51c22850c941.js"],"component---src-pages-search-js":["/component---src-pages-search-js-8e98fa834fcbdfe57771.js"],"component---src-pages-tags-js":["/component---src-pages-tags-js-db23dd28a2695260252b.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-40445c3deb5430fd6690.js"]};/*]]>*/</script><script src="/polyfill-14e0012b16034d67448d.js" nomodule=""></script><script src="/component---src-templates-blog-post-js-40445c3deb5430fd6690.js" async=""></script><script src="/d5d7a013bc6c1e2b6d7db819052c16d7efea5559-609403dfd4c51ec95e7c.js" async=""></script><script src="/573b27ab57743726e9d32c2d29ca767494f9c99f-fce3248f1a042b2435ab.js" async=""></script><script src="/commons-93657fdebe4187bbe246.js" async=""></script><script src="/2852872c-b2b17e6d0848f7e31174.js" async=""></script><script src="/cb1608f2-a114316b1cb3096fafcd.js" async=""></script><script src="/app-99111e41c9be7a3b0c6b.js" async=""></script><script src="/framework-91fcb8688cfb06592c2c.js" async=""></script><script src="/webpack-runtime-c580888eb32eb323ac10.js" async=""></script></body></html>