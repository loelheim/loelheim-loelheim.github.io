---
title: ê°œì¸ ë¹„ë¡œ ë¸”ë¡œê·¸ ì‹œì‘í•˜ê¸° - ì»¤ìŠ¤í„°ë§ˆì´ì§• (1)
description: ê°œì¸ ë¹„ë¡œ ì‹œì‘í•˜ëŠ” ë¸”ë¡œê·¸, ê¸€ì“°ê¸° ê¸°ëŠ¥ì„ ì¶”ê°€í•´ë³´ì
tags: ['gatsby','ê°œì¸ ë¹„','blog','ë¸”ë¡œê·¸','ê¸€ì“°ê¸°']
date: 2021-11-26T12:36:31.057Z
---

### 1. ë“¤ì–´ê°€ê¸°ì— ì•ì„œ

ì§€ê¸ˆê¹Œì§€ ë³€ê²½í•œ ë‚´ìš©ì€ ê¸°ë³¸ì ì¸ íŒŒì¼ì„ ìˆ˜ì •í•˜ëŠ” ê²ƒì— ë¶ˆê³¼í•˜ë‹¤.
í•˜ì§€ë§Œ ìŠ¤íƒ€í„°ë¡œ ì‹œì‘í–ˆìŒì—ë„ ë¶ˆêµ¬í•˜ê³  ì—¬ì „íˆ íƒ€ ë¸”ë¡œê·¸ í”Œë«í¼ì— ë¹„í•˜ë©´ ì œê³µí•˜ëŠ” ê²ƒì´ ë„ˆë¬´ë‚˜ë„ ì ë‹¤.

ê·¸ë˜ì„œ ì§ì ‘ ì½”ë“œë¥¼ ì¶”ê°€í•´ì•¼ë§Œ ì œëŒ€ë¡œ ëœ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
ê°„ë‹¨í•˜ê²Œ ê¸€ ì“°ê¸° ìœ„í•´ ì‹œì‘í•œ ê²ƒì´ì§€ë§Œ ì˜¤íˆë ¤ ì»¤ìŠ¤í„°ë§ˆì´ì§•ì„ ìœ„í•´ ì‚½ì§ˆí•˜ëŠ” ê¼´ì´ë¼ë‹ˆ ... ì–´ì¨‹ê±°ë‚˜ ì‹œì‘í•œ ì´ìƒ ëì„ ë´ì•¼ê² ë‹¤.

### 2. ë¸”ë¡œê·¸ í…œí”Œë¦¿

`templates/blog-post.js`ëŠ” í¬ìŠ¤íŠ¸ì˜ ë ˆì´ì•„ì›ƒì„ ì§€ì •í•˜ëŠ” ë ˆì´ì•„ì›ƒ íŒŒì¼ì´ë‹¤.
ì—¬ê¸°ì— ì½”ë“œë¥¼ ì¶”ê°€í•˜ì—¬ ì›í•˜ëŠ” í˜•íƒœì˜ í˜ì´ì§€ë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆë‹¤.

### 3. ì¶”ê°€í•  ê¸°ëŠ¥ ë¦¬ìŠ¤íŠ¸ì—…

ì‘ì—…í•˜ê¸° ì „ì— ë‚´ê°€ ì›í•˜ëŠ” ê¸°ëŠ¥ì„ ë¨¼ì € ë‚˜ì—´í•´ë³´ëŠ” ê²ƒì´ ì¢‹ì„ ê²ƒ ê°™ë‹¤.
ì´ì „ì— ë´¤ë˜ ìŠ¤íƒ€í„°ì—ì„œ ì°¸ê³ í•˜ì—¬ ë‚´ê°€ ì¶”ê°€í•˜ê³ ì í•˜ëŠ” ê¸°ëŠ¥ì„ ë‚˜ì—´í•´ë´¤ë‹¤.

- ê¸€ì“°ê¸° ê¸°ëŠ¥ ì¶”ê°€
- TOC - Table of Contents
- íƒœê·¸ ê´€ë ¨ ê¸°ëŠ¥
- ëŒ“ê¸€
- ê²€ìƒ‰

ì–´ë–¤ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ë ¤ê³  í•˜ë”ë¼ë„ ê¸€ ì‘ì„±ì´ ë˜ì–´ì•¼ ë‹¤ë¥¸ ì‘ì—…ë“¤ì´ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— ê¸€ì“°ê¸° ê¸°ëŠ¥ë¶€í„° ì¶”ê°€í•˜ëŠ” ê²ƒì´ ì¢‹ì„ ê²ƒ ê°™ë‹¤.

### 4. ê¸€ì“°ê¸° ê¸°ëŠ¥ ë¶„ì„

ë¸”ë¡œê·¸ ë°ì´í„°ëŠ” `content/blog` í•˜ìœ„ì— ìˆìœ¼ë©°, ë‘ ê°€ì§€ ë°©ì‹ìœ¼ë¡œ êµ¬ì„± ê°€ëŠ¥í•˜ë‹¤.

- `{ë¸”ë¡œê·¸ ì œëª©}` ìœ¼ë¡œ í´ë” ì´ë¦„ì„ ì •í•˜ê³  í•˜ìœ„ì— `index.md` íŒŒì¼ì„ ì¶”ê°€í•˜ëŠ” ë°©ì‹
- `{ë¸”ë¡œê·¸ ì œëª©}.md` ë‹¨ì¼ íŒŒì¼ ë°©ì‹

ì²¨ë¶€ íŒŒì¼ì„ í¬ìŠ¤íŠ¸ë§ˆë‹¤ ê´€ë¦¬í•˜ë ¤ë©´ í´ë” í˜•íƒœë¡œ ê´€ë¦¬í•˜ëŠ” ë°©ì‹ì´ ì¡°ê¸ˆ ë” ë‚˜ì•„ë³´ì¸ë‹¤.

ì´ë¯¸ ì§€ì› ì„ì§€ë„ ëª¨ë¥´ê² ì§€ë§Œ `content/blog`ì— ìˆë˜ ìƒ˜í”Œ í¬ìŠ¤íŠ¸ë¥¼ ë³´ë‹¤ë³´ë©´ `--- ~ ---` ì‚¬ì´ì— í¬ìŠ¤íŠ¸ì˜ ìš”ì•½ ì •ë³´ë¥¼ í‘œí˜„í•˜ëŠ” ë°ì´í„°ê°€ ì¡´ì¬í•œë‹¤. ì˜ˆë¥¼ ë“¤ë©´ ì´ëŸ° ì‹ì´ë‹¤.

```markdown
---
title: ê°œì¸ ë¹„ë¡œ ë¸”ë¡œê·¸ ì‹œì‘í•˜ê¸° - í”Œë«í¼ ì„ ì •
description: ê°œì¸ ë¹„ë¡œ ì‹œì‘í•˜ëŠ” ë¸”ë¡œê·¸, ì–´ë–¤ í”Œë«í¼ì´ ì¢‹ì„ê¹Œ?
date: 2021-11-23T16:24:42.627Z
---
```

í•´ë‹¹ ì •ë³´ë¥¼ `Frontmatter`ë¼ê³  í•˜ëŠ” ê²ƒ ê°™ë‹¤.
`gatsby-node.js`ì˜ `createSchemaCustomization`ì— ì„ ì–¸ëœ `Frontmatter` ìŠ¤í‚¤ë§ˆë¡œ í˜•íƒœê°€ ì •ì˜ë˜ëŠ”ë°, ìŠ¤í‚¤ë§ˆë¥¼ í™•ì¥í•˜ì—¬ íƒœê·¸ë¥¼ ì§€ì •í•˜ê³  ê·¸ì— ë§ëŠ” í…œí”Œë¦¿ì„ ë¶ˆëŸ¬ì˜¤ë„ë¡ í•˜ëŠ” ê²½ìš°ë„ ìˆë‹¤.

ë¸”ë¡œê·¸ì˜ ë©”íƒ€ ë°ì´í„°ë¥¼ ê¸°ë¡í•˜ëŠ” ê²ƒì„ í¬í•¨í•˜ì—¬ ì œëª©ì„ ì—¬ê¸°ì„œ ìƒˆë¡œ ì •ì˜í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤.
í•˜ì§€ë§Œ `Frontmatter`ì—ì„œ ì œëª©ì„ ìˆ˜ì •í•˜ë”ë¼ë„ ì ‘ê·¼ ê²½ë¡œëŠ” íŒŒì¼ëª…ìœ¼ë¡œ ì ‘ê·¼ ê°€ëŠ¥í•˜ë‹ˆ ì´ ë¶€ë¶„ì€ ì•Œì•„ë‘ë©´ ì¢‹ë‹¤.  

ê²°êµ­ì— ê¸€ì“°ê¸° ê¸°ëŠ¥ì´ë¼ëŠ” ê²ƒì€ ì•„ë˜ ë‘ ê°€ì§€ë¥¼ êµ¬í˜„í•˜ë©´ ëœë‹¤.

- ë¸”ë¡œê·¸ ì‘ì„±ì— í•„ìš”í•œ í´ë” ì¶”ê°€ ë° `index.md` ì¶”ê°€
- `Frontmatter`ë¥¼ ìë™ìœ¼ë¡œ ì¶”ê°€í•´ì£¼ëŠ” ìŠ¤í¬ë¦½íŠ¸ í˜¹ì€ ê¸°ëŠ¥

ì°¸ê³ ë¡œ ê³µì‹ í™ˆí˜ì´ì§€ì—ì„œ [ê´€ë ¨ í”ŒëŸ¬ê·¸ì¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì°¾ì•„ë³´ë‹ˆ](https://www.gatsbyjs.com/plugins/?=frontmatter) ë§ˆë•…í•œ ê²ƒì€ ì—†ì—ˆê³ , ìŠ¤íƒ€í„°ë¥¼ ì—¬ëŸ¿ ë¶„ì„í•˜ë‹¤ë³´ë‹ˆ `Frontmatter`ë¥¼ í¬í•¨í•´ì„œ ê¸€ì„ ì‘ì„±í•´ì£¼ëŠ” ê¸°ëŠ¥ì„ [gatsby-post-gen](https://github.com/JaeYeopHan/gatsby-post-gen) ë¼ëŠ” ë³„ë„ë¡œ ë¶„ë¦¬ëœ í”ŒëŸ¬ê·¸ì¸ì„ ì°¾ì•˜ë‹¤.
`ê°œì¸ ë¹„`ì— ëŒ€í•œ ì˜ì¡´ì„±ë„ ì—†ì–´ë³´ì˜€ê³ , í•´ë‹¹ í”ŒëŸ¬ê·¸ì¸ì„ ì„¤ì¹˜í•˜ê³  ê´€ë ¨ ì»¤ë§¨ë“œë¥¼ ì¶”ê°€í•˜ë©´ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

~~í•˜ì§€ë§Œ í•´ë‹¹ í”ŒëŸ¬ê·¸ì¸ì€ ì¶”í›„ì— êµ¬í˜„í•  íƒœê·¸ì— ëŒ€í•œ ë©”íƒ€ ì •ë³´ë¥¼ ì¶”ê°€í•˜ë ¤ë©´ ìˆ˜ì •ì´ í•„ìš”í–ˆê³ , ì¹´í…Œê³ ë¦¬ì˜ ë¬¼ë¦¬ì  ê²½ë¡œì™€ ë©”íƒ€ ì •ë³´ê°€ ê²°í•©ëœ êµ¬ì¡°ì¸ ê²ƒ ê°™ì•„ì„œ ìƒˆë¡œ ë§Œë“œëŠ”ê²Œ ì¢‹ê² ë‹¤ê³  ìƒê°í–ˆë‹¤.~~

ì›ë˜ ì¹´í…Œê³ ë¦¬ë¼ëŠ” í•„ë“œë¥¼ ìƒˆë¡œ íŒŒì„œ í• ë‹¹í•˜ëŠ” ì‹ìœ¼ë¡œ êµ¬ì„±í•˜ë ¤ê³  í–ˆëŠ”ë°, ë¸”ë¡œê·¸ ì»´íŒŒì¼ íƒ€ì„ ì‹œì  ì™¸ì—ëŠ” `ê°œì¸ ë¹„`ì˜ ì •ë³´ë¥¼ ë°›ì•„ì˜¬ ë°©ë²•ì´ ì—†ì—ˆë‹¤. `GraphQL`ë¡œ ë‹¤ ë˜ëŠ”ì¤„ ì•Œì•˜ëŠ”ë° êµ¬í˜„í•´ë†“ê³  ë³´ë‹ˆ ì•„ë˜ ê°™ì€ ì—ëŸ¬ê°€ ëœ¬ë‹¤.

```
/Users/loel/Documents/blog/loelheim/node_modules/gatsby/cache-dir/commonjs/gatsby-browser-entry.js:106
  throw new Error(`It appears like Gatsby is misconfigured. Gatsby related \`graphql\` calls ` + `are supposed to only be evaluated at compile time, and then compiled away. ` + `Unfortunately, something went wrong and the query was left in the compiled code.\n\n` + `Unless your site has a complex or custom babel/Gatsby configuration this is likely a bug in Gatsby.`);
        ^

Error: It appears like Gatsby is misconfigured. Gatsby related `graphql` calls are supposed to only be evaluated at compile time, and then compiled away. Unfortunately, something went wrong and the query was left in the compiled code.

Unless your site has a complex or custom babel/Gatsby configuration this is likely a bug in Gatsby.
    at graphql (/Users/loel/Documents/blog/loelheim/node_modules/gatsby/cache-dir/commonjs/gatsby-browser-entry.js:106:9)
    at inquiryCategory (/Users/loel/Documents/blog/loelheim/scripts/frontman/index.js:90:40)
    at /Users/loel/Documents/blog/loelheim/scripts/frontman/index.js:203:28
    at processTicksAndRejections (node:internal/process/task_queues:96:5)
```
ë­”ê°€ ì»´íŒŒì¼ ì²˜ë¦¬ê°€ ëœ ì‹œì ì—ë§Œ ì„¤ì •ê°™ì€ê²Œ ì˜ ë™ì‘í•˜ëŠ” êµ¬ì¡°ì´ë©°, ì„œë²„ë¥¼ ë„ì› ì„ ë•Œ ì¿¼ë¦¬ì— ì‘ë‹µí•  ìˆ˜ ìˆëŠ” ê²ƒ ê°™ìœ¼ë‹ˆ ì•„ì‰½ì§€ë§Œ ì´ ê¸°ëŠ¥ì€ ìƒëµí•´ì•¼ í•  ê²ƒ ê°™ë‹¤.

ì°¸ê³ ë¡œ ì „ë°˜ì ì¸ êµ¬ì¡°ì™€ ì½”ë“œì— ëŒ€í•´ì„œëŠ” í›„ìˆ í•˜ê² ì§€ë§Œ, ëŒ€ëµ ì´ëŸ° ì½”ë“œë¥¼ ì‘ì„±í•˜ë ¤ê³  í–ˆì—ˆë‹¤. ì¿¼ë¦¬ëŠ” ì—ë””í„°ì—ì„œ ì˜ ë™ì‘í–ˆì—ˆê¸° ë•Œë¬¸ì— ë‚˜ë¦„ ì•„ì‰¬ì› ë‹¤. 

```javascript
const inquiryCategory = async () => {

    const data = useStaticQuery(graphql`
        query {
          allMarkdownRemark {
            edges {
              node {
                frontmatter {
                  category
                }
              }
            }
          }
        }
    `)

    const categories = data.allMarkdownRemark.edges.map((edge) => edge.node.frontmatter.category)
    const choices = [CATEGORY_NEW, ...new Set(categories)]

    const { category } = await inquirer.prompt({
        type: 'list',
        name: 'category',
        choices
    })

    if (category !== CATEGORY_NEW) {

        const { newCategory } = await inquirer.prompt({
            type: 'input',
            name: 'newCategory',
            validate: (value) => {

                if (!value) {
                    return 'âš ï¸  category is empty !'   
                }

                if (value === CATEGORY_NEW) {
                    return 'âš ï¸  category is invalid !'   
                }

                if (categories.indexOf(value) !== -1) {
                    return 'âš ï¸  same category already exists !'   
                }

                return true
            }
        })

        return newCategory
    }

    return category
}
```

ì–´ì¨‹ê±°ë‚˜ ê¸€ì“°ê¸° ê¸°ëŠ¥ì— í•„ìš”í•œ ë¶€ë¶„ì„ ê²€í† í•´ë³´ë©´ ì•„ë˜ í”„ë¡œì„¸ìŠ¤ì™€ ê°™ì´ ì§„í–‰ë˜ë©´ ë  ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤.

- `Frontmatter`ë¥¼ êµ¬ì„±í•˜ëŠ” ë°ì´í„°ë¥¼ ì…ë ¥ë°›ì„ ìˆ˜ ìˆë„ë¡ cli í˜•íƒœë¡œ êµ¬ì„±í•œë‹¤.

    - ì œëª© (String) : í•„ìˆ˜ë¡œ ì…ë ¥í•˜ë„ë¡ ìœ ë„
    - ì„¤ëª… (String?) : ë¹ˆ ê°’ì´ì–´ë„ í†µê³¼
    - íŒŒì¼ëª… (String) : ë¹ˆ ê°’ì´ë©´ ì œëª©ì„ í™œìš©í•˜ë©°, íŒŒì¼ ê²½ë¡œë¡œ ì í•©í•˜ì§€ ì•Šìœ¼ë©´ ì¬ì…ë ¥
    - ë‚ ì§œ (String) : í¬ìŠ¤íŠ¸ë¥¼ ìƒì„±í•˜ëŠ” ì‹œì ì— ìë™ ìƒì„±í•˜ì—¬ ISO í¬ë§·ìœ¼ë¡œ ìƒì„±
    - íƒœê·¸ (Array<String>?) : `,` ë‹¨ìœ„ë¡œ ë¶„ë¦¬í•˜ê³  ì–‘ ëì— í¬í•¨ëœ ê³µë°±ë§Œ ì œê±°

- ì…ë ¥ë°›ì€ ë°ì´í„°ì™€ í¬ë§·ì„ ê³ ë ¤í•˜ì—¬ ìƒˆë¡œìš´ í¬ìŠ¤íŠ¸ë¥¼ ìœ„í•œ í´ë”ì™€ íŒŒì¼ì„ ìƒì„±í•œë‹¤.
- cli ì»¤ë§¨ë“œë¡œ ìœ„ í”„ë¡œì„¸ìŠ¤ê°€ ì‹¤í–‰ë  ìˆ˜ ìˆë„ë¡ ì—°ê²°í•œë‹¤.

ëŒ€ëµì ìœ¼ë¡œ ì…ë ¥í•œ ê²°ê³¼ì— ìœ í˜•ë³„ë¡œ ê²€ì¦ ë©”ì„œë“œë¥¼ ì¸ìë¡œ ì œê³µí•˜ê³  ì •ì œí•˜ëŠ” ê³¼ì •ì„ ê±°ì¹œ ê²°ê³¼ë¥¼ ëª¨ì•„ë‘” í›„, ì´ ê²°ê³¼ë¥¼ ë°”íƒ•ìœ¼ë¡œ í´ë”ë‘ íŒŒì¼ì„ ìƒì„±í•˜ê³  `Frontmatter`ë¥¼ ì¶”ê°€í•˜ë©´ ëë‚  ê²ƒ ê°™ë‹¤.

### 5. ê¸€ì“°ê¸° ê¸°ëŠ¥ êµ¬í˜„

ëª¨ë“  ê°œë°œ ì‘ì—…ì—ì„œ ê°€ì¥ ì–´ë ¤ìš´ ë¶€ë¶„ì€ `ì‘ëª…`ì´ë‹¤.

ì¼ë‹¨ ë¸”ë¡œê·¸ì— í•„ìš”í•œ ê°€ì¥ ì²˜ìŒ ë‹¨ê³„ì— í•´ë‹¹í•˜ê¸°ë„ í•˜ê³ , `Frontmatter`ë‘ ë¹„ìŠ·í•˜ê²Œ ì´ë¦„ ì§€ìœ¼ë ¤ê³  í•˜ë‹¤ë³´ë‹ˆ `Frontman`ì´ ìƒê°ë‚¬ë‹¤.
ê·¸ë˜ì„œ `scripts/frontman` í´ë”ë¥¼ ì¶”ê°€í•˜ê³  ì•ˆì— `index.js` íŒŒì¼ì„ ì¶”ê°€í–ˆë‹¤.

ê·¸ ë‹¤ìŒì—ëŠ” `npm` ì»¤ë§¨ë“œë¥¼ ì¶”ê°€í–ˆë‹¤.
`script` ë¸”ë¡ì— `"post": "node scripts/frontman",`ë¥¼ ì¶”ê°€í•˜ë©´ `npm run post`ë¡œ `index.js`ì˜ ë‚´ìš©ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.

ì´ì œ `Frontmatter` ìŠ¤í‚¤ë§ˆì— ì •ë³´ë¥¼ ì¶”ê°€í•  ì°¨ë¡€ë‹¤.

`gatsby-node.js`ì˜ `createSchemaCustomization`ì— ìˆëŠ” `createTypes`ì„ ë³´ë©´ ê´€ë ¨ ìŠ¤í‚¤ë§ˆê°€ ì •ì˜ë˜ì–´ ìˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. ì—¬ê¸°ì— `tags` ì •ë³´ë¥¼ ì¶”ê°€í•˜ë©´ ëì´ë‹¤.  

```
type Frontmatter {
  title: String
  description: String
  tags: [String]
  date: Date @dateformat
}
```

ë‹¤ìŒì€ ë¡œì§ì˜ ê¸°ë³¸ì ì¸ ë¼ˆëŒ€ë¥¼ ë³´ì. í•„ìš”í•œ ì •ë³´ë“¤ì„ ì‚¬ìš©ìì—ê²Œ ì „ë‹¬ë°›ì•„ì„œ íŒŒì¼ì„ ìƒì„±í•˜ëŠ” ë‹¨ìˆœí•œ êµ¬ì¡°ë¼ ë³´ë©´ ë˜ê² ë‹¤. 

```javascript
module.exports = (async () => {

    const now = new Date()
    const title = await inquiryTitle()
    const description = await inquiryDescription()
    const path = await inquiryPath(title, now)
    const tags = await inquiryTags()
    const date = now.toISOString()

    const frontmatter = {
        title,
        description,
        tags,
        date
    }

    createFrontmatter(path, frontmatter, now)
})()
```

ë‹¤ìŒì€ ì œëª©ì„ ì…ë ¥ë°›ëŠ” ë©”ì„œë“œì¸ `inqueryTitle`ë¥¼ ì‚´í´ë³´ì.

```javascript
const inquiryTitle = async () => {

    const { title } = await inquirer.prompt({
         type: 'input',
         name: 'title',
         validate: (value) => {

            if (!value || value.trim() === '') {
                return 'âš ï¸  title is empty !'
            }

            if (value === '.' || value === '..') {
                return 'âš ï¸  title is invalid !'
            }

            return true
         }
    })

    return title.trim()
}
```

ì…ë ¥ì„ ë°›ê¸° ìœ„í•´ì„œ `inquirer`ë¥¼ ì‚¬ìš©í–ˆëŠ”ë°, ì´ë¯¸ `ê°œì¸ ë¹„`ì—ì„œ ì“°ê³  ìˆì–´ì„œ ë³„ë„ë¡œ ì˜ì¡´ì„±ì„ ì„¤ì¹˜í•  í•„ìš”ëŠ” ì—†ì—ˆë‹¤.
ì´ë²ˆ ê¸€ì“°ê¸° ê¸°ëŠ¥ ì¶”ê°€ë¥¼ ìœ„í•´ `inquirer`ë¥¼ ì‚¬ìš©í•˜ëŠ”ë° ìˆì–´ì„œ ì£¼ë¡œ ê´€ì‹¬ì„ ê°€ì§ˆë§Œí•œ ë¶€ë¶„ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.

- type: ì…ë ¥ í˜•ì‹ì„ ì˜ë¯¸í•˜ë©° `input`, `list` ë§Œìœ¼ë¡œë„ ì¶©ë¶„íˆ êµ¬í˜„ ê°€ëŠ¥
- name: ì…ë ¥í•  ë°ì´í„°ì˜ í‚¤ ê°’ì„ ì˜ë¯¸í•˜ë©°, ë°›ì•„ì˜¨ ê²°ê³¼ë¥¼ `êµ¬ì¡° ë¶„í•´ - destructuring`í•  ê°’ìœ¼ë¡œ ì‚¬ìš©
- validate: ë“¤ì–´ì˜¨ ê°’ì„ ê²€ì¦í•  ëª©ì ìœ¼ë¡œ ì‚¬ìš©í•˜ë©°, `return true`ë¥¼ ë°›ì§€ ì•ŠëŠ” ê²½ìš°ì— ëŒ€í•´ì„œëŠ” ì•ˆë‚´ ë©”ì‹œì§€ë¡œ íŠ•ê¸´ í›„ ì¬ì…ë ¥ì„ ë°›ë„ë¡ í•¨
- default : ì…ë ¥ ì‹œ ê¸°ë³¸ ê°’ì„ ì§€ì •
- choices: `type = list`ì¼ ë•Œ, ì„ íƒí•  ëª©ë¡ì„ ì§€ì •

ëª¨ë“  ë°ì´í„°ê°€ ìœ„ ë‚´ìš©ìœ¼ë¡œ ì¶©ë¶„íˆ ì»¤ë²„ë˜ê¸° ë•Œë¬¸ì— ì´í›„ì—ëŠ” ì´ì™€ ê´€ë ¨ëœ ë¡œì§ì„ ë”°ë¡œ ì„¤ëª…í•˜ì§„ ì•Šì„ ê²ƒì´ë‹¤.
`title`ì„ ê²½ë¡œë¡œ ì‚¬ìš©í•˜ê²Œ ëœë‹¤ë©´ `í˜„ì¬ í´ë” - .`ì™€ `ìƒìœ„ í´ë” - ..`ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ì´ì— ëŒ€í•œ ë¡œì§ë§Œ ì¶”ê°€í–ˆë‹¤. 

ë‹¤ìŒì€ `description` ë‚´ìš©ì´ë©°, í•´ë‹¹ ì •ë³´ëŠ” í•„ìˆ˜ê°€ ì•„ë‹ˆê¸° ë•Œë¬¸ì— ë³„ë‹¤ë¥¸ ë¡œì§ì´ ì—†ë‹¤.

```javascript
const inquiryDescription = async () => {

    const { description } = await inquirer.prompt({
        type: 'input',
        name: 'description'
   })

   return description?.trim()
}
```

ê·¸ë‚˜ë§ˆ ì‘ì—…ì„ í•˜ëŠ”ë° ê³µì„ ë“¤ì˜€ë˜(?) íŒŒì¼ ê²½ë¡œ ì„¤ì •ì´ë‹¤.
ê¸°ì¡´ ìŠ¤íƒ€í„°ëŠ” ì œëª©ì„ ì •ê·œí™”í•˜ê³  ë¶ˆí•„ìš”í•œ í…ìŠ¤íŠ¸ë¥¼ ì œê±°í•´ì„œ íŒŒì¼ìœ¼ë¡œ ì‚¬ìš©í–ˆëŠ”ë°, ë‚˜ëŠ” ì§ì ‘ ì…ë ¥ë°›ê¸°ë¡œ í–ˆìœ¼ë©° ì•„ë˜ ë‚´ìš©ì„ ê³ ë ¤í–ˆì—ˆë‹¤.

- ì§ì ‘ íŒŒì¼ëª…ì„ ì§€ì •í•˜ê³  ì‹¶ì—ˆìœ¼ë©°, ê·€ì°®ì„ ê²ƒì„ ëŒ€ë¹„í•´ ì œëª©ì„ `default` ì¸ìë¡œ ì œê³µí•˜ì—¬ ê¸°ë³¸ê°’ì„ ì„¸íŒ…í•˜ë©´ ì¢‹ê² ë‹¤
- í¬ìŠ¤íŠ¸ë§ˆë‹¤ í´ë” ë‹¨ìœ„ë¡œ êµ¬ì„±í•˜ê³  ê·¸ ì•ˆì— ë¦¬ì†ŒìŠ¤ê°€ ìˆì—ˆìœ¼ë©´ í•˜ëŠ” ìƒê°ì´ ë“¤ì–´ ë‹¨ì¼ íŒŒì¼ êµ¬ì¡°ë³´ë‹¤ëŠ” í´ë” êµ¬ì¡°ë¥¼ ê³ ë ¤í–ˆë‹¤
- ì´ëŸ° êµ¬ì¡°ì˜ íŠ¹ì„±ìƒ ê²½ë¡œ ì¤‘ë³µ ì²´í¬ë„ í¬í•¨ë˜ë©´ ì¢‹ê² ë‹¨ ìƒê°ì´ ë“¤ì—ˆë‹¤

```javascript
const inquiryPath = async (title, date) => {

    const { pathname } = await inquirer.prompt({
        type: 'input',
        name: 'pathname',
        default: title,
        message: 'pathname (alphanumeric except some special characters): ',
        validate: (value) => {

            if (!value) {
                return 'âš ï¸  pathname is empty !'
            }

            if (!validPath(value)) {
                return 'âš ï¸  pathname is invalid !'
            }

            const destination = buildDestinationPath(value, date)

            try {

                fs.accessSync(destination, fs.constants.R_OK | fs.constants.W_OK)
                return 'âš ï¸  pathname is in use !'

            } catch(e) {
            }

            return true
        }
    })

    return refinePath(pathname)
}
```

alpha-numeric ê°’ê³¼ ì¼ë¶€ ê°’ë§Œ í—ˆìš©í•œë‹¤ê³  ì•ˆë‚´ë¥¼ í–ˆìœ¼ë‚˜ ì‚¬ì‹¤ ì •ê·œì‹ìœ¼ë¡œ í—ˆìš©í•˜ëŠ” ë¬¸ìì—´ì„ ìƒë‹¹íˆ ì œí•œí–ˆìœ¼ë©°, ì´ëŠ” `validPath`ì™€ `refinePath`ì— ì˜ ë…¹ì—¬ì ¸ ìˆë‹¤.
ì •ê·œì‹ì—ì„œëŠ” ìˆ«ì, ì˜ì–´, í•œê¸€, ê³µë°±, ì†Œê´„í˜¸ ë° í•˜ì´í”ˆë§Œ í—ˆìš©í•˜ê¸°ë¡œ í–ˆìœ¼ë©°, ë§ˆì§€ë§‰ì—ì„œ ì •ì œí•  ë•Œ í•´ë‹¹ ë¬¸ìë¥¼ ëª¨ë‘ ì–¸ë”ìŠ¤ì½”ì–´ë¡œ ëŒ€ì²´í•˜ê²Œë” êµ¬ì„±í–ˆë‹¤.

```javascript
const directory = '/content/blog'
const regexPath = /^[0-9a-zA-Zê°€-í£ \(\)\-_]+$/
const regexToRefine = /[^0-9a-zA-Zê°€-í£ \(\)\-]/g

const validPath = (path) => {
    return regexPath.test(path)
}

const refinePath = (path) => {
    return path.replaceAll(regexToRefine, '_')
}

const buildDestinationPath = (pathname, date) => {
    return path.join(process.cwd(), directory, `${date.getFullYear()}_${date.getMonth() + 1}`, pathname)
}
```

`buildDestinationPath`ì—ì„œëŠ” ë‚ ì§œë¥¼ ë°›ì•„ì„œ ì²˜ë¦¬í•˜ëŠ”ë°, ì•„ë¬´ë˜ë„ ìƒìœ„ì— ì¹´í…Œê³ ë¦¬ê°€ ì—†ëŠ” êµ¬ì¡°ë¡œ ì‘ì—…í•˜ë‹¤ë³´ë‹ˆ ë„ˆë¬´ íŒŒì¼ì´ ê´€ë¦¬ê°€ ì•ˆë  ê²ƒ ê°™ë‹¤ëŠ” ìƒê°ì— `ì‘ì„±ì—°ì›”`ê¹Œì§€ë§Œ í´ë” ë‹¨ìœ„ë¡œ êµ¬ì„±í•˜ê¸°ë¡œ ìƒê°í–ˆê³  í•´ë‹¹ ê²½ë¡œê°€ ìˆëŠ”ì§€ ì—¬ë¶€ë¥¼ `fs.accessSync`ë¡œ ì²´í¬í–ˆë‹¤. 

ê±°ì˜ ë‹¤ ëë‚¬ë‹¤. íƒœê·¸ëŠ” `inquirer`ì˜ ë„ì›€ì„ ë°›ê¸° ì‰½ì§€ ì•Šì•„ì„œ ë‹¨ì¼ ë¬¸ìì—´ë¡œ ë°›ê³  ì •ì œí•´ì„œ ì‚¬ìš©í•˜ê¸°ë¡œ í–ˆë‹¤. ê°€ì¥ ê°„í¸í•œê±´ ì½¤ë§ˆë¡œ êµ¬ë¶„í•˜ê³  ê³µë°±ì„ ì œê±°í•˜ì—¬ ë°°ì—´ í˜•íƒœë¡œ êµ¬ì„±í•˜ëŠ” ê²ƒì´ë‹¤.

```javascript
const inquiryTags = async () => {
    
    const { tags } = await inquirer.prompt({
        type: 'input',
        name: 'tags',
        message: 'tags (multiple tags concatenated with comma): ',
        validate: (value) => {

            if (!value) {
                return 'âš ï¸  tag string is empty !'
            }

            return true
        }
    })

    return tags?.split(',').map(tag => tag.trim())
}
```

ìµœì†Œí•œ íƒœê·¸ë¥¼ í•˜ë‚˜ ì´ìƒ ì§€ì •í•˜ì—¬ ì¹´í…Œê³ ë¦¬ì˜ ì—­í• ì„ ê²¸í•˜ë„ë¡ í–ˆìœ¼ë©°, ë“¤ì–´ì˜¨ ë¬¸ìì—´ì„ ì½¤ë§ˆë¡œ êµ¬ë¶„í•œ í›„ `trim` ë©”ì„œë“œë¡œ ê³µë°±ì„ ì œê±°í•˜ë©´ ê°„ë‹¨í•˜ê²Œ í•´ê²°ëœë‹¤.

ë§ˆì§€ë§‰ìœ¼ë¡œ ì‹¤ì œë¡œ ìƒì„±í•˜ëŠ” ë¡œì§ì´ë‹¤.

```javascript

const createFromTemplate = (frontmatter) => {
    return `---
title: ${frontmatter.title}
description: ${frontmatter.description}
tags: [${frontmatter.tags.map((tag) => `'${tag}'`)}]
date: ${frontmatter.date}
---`
}

const printFrontmatter = (frontmatter) => {

    const contents = [
        ``,
        ` > title: ${frontmatter.title}`,
        ` > description: ${frontmatter.description || ''}`,
        ` > tags: ${frontmatter.tags}`,
        ` > date: ${frontmatter.date}`,
        ``,
        ` ğŸš€  now your new post is ready !`,
        ``
    ]

    console.log(contents.join('\n'))
}

const createFrontmatter = (pathname, frontmatter, date) => {

    const contents = createFromTemplate(frontmatter)
    const destination = buildDestinationPath(pathname, date)
    const filepath = path.join(destination, 'index.md')

    try {
        fs.mkdirSync(destination, { recursive: true })
        fs.writeFileSync(filepath, contents)

        printFrontmatter(frontmatter)
    } catch(e) {
        console.error('ğŸš¨  something went wrong !')
    }
}

```

ì „ë‹¬ë°›ì€ ì •ë³´ë¥¼ í˜•ì‹ì— ë§ê²Œ ì±„ì›Œë„£ì–´ `Frontmatter` ì •ë³´ë¥¼ ìƒì„±í•˜ê³  ì§€ì •í•œ ê²½ë¡œ ë° íŒŒì¼ ì´ë¦„ì˜ í´ë”ë¥¼ ë§Œë“  ë‹¤ìŒ `index.md`ì— ìƒì„±í•œ ë°ì´í„°ë¥¼ ì¨ë„£ìœ¼ë©´ ëª¨ë“  ê³¼ì •ì´ ëë‚œë‹¤.
ê·¸ ì™¸ì˜ ë‚˜ë¨¸ì§€ ë‚´ìš©ì€ ë³´ê¸° ì¢‹ìœ¼ë¼ê³  ë§Œë“  ê²ƒì´ë‹ˆ ìƒëµ ...

ì–¼ì¶” ê¸€ì“°ê¸°ëŠ” ì™„ë£Œëœ ê²ƒ ê°™ìœ¼ë‹ˆ `TOC - Table of Contents` ê¸°ëŠ¥ì„ ì¶”ê°€í•´ë³´ì.

### Reference

- https://github.com/JaeYeopHan/gatsby-post-gen